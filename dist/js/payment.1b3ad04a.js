(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["payment"],{"2b6e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-wrapper"},[a("van-nav-bar",{staticClass:"navbar",attrs:{border:!1,title:"收款方式","left-arrow":""},on:{"click-left":t.onarrowLeftClick}}),a("div",{staticClass:"payment-form"},[a("van-field",{staticClass:"mb10 br5",attrs:{border:!1,label:"收款渠道",value:"微信或支付宝",readonly:""}}),a("van-field",{staticClass:"mb10 br5",attrs:{border:!1,label:"账号",placeholder:"请输入微信或支付宝收款账号"},model:{value:t.accountNumber,callback:function(e){t.accountNumber=e},expression:"accountNumber"}}),a("div",{staticClass:"mb10 br5 payment-form-upload"},[a("van-uploader",{attrs:{"preview-full-image":!1,"after-read":t.afterRead,"lazy-load":!0}},[a("div",{staticClass:"paymentFormItem_1"},[a("div",{staticClass:"paymentFormItem_1_img"},[t.imgurl1?a("img",{staticStyle:{width:"100%",height:"4rem"},attrs:{src:t.imgurl1,alt:""}}):a("van-icon",{attrs:{name:"qr"}})],1)]),a("div",{staticClass:"paymentFormItem_2"},[t._v("点击上传收款二维码")]),t.uploadMask?a("div",{staticClass:"payment-form-upload-mask"},[a("van-loading",[t._v("上传中...")])],1):t._e()])],1),a("div",[a("van-field",{staticClass:"mb10 br5",attrs:{label:"验证码",border:!1,clickable:""},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{staticClass:"postmess",attrs:{size:"small",type:"primary"},on:{click:t.postmess}},[t._v(t._s(t.phoneMess))])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),a("van-button",{staticClass:"payment-save-btn",attrs:{type:"primary"},on:{click:t.paymentSaveBtn}},[t._v("保存")])],1),a("popup")],1)},i=[],o=(a("99af"),a("ac1f"),a("5319"),a("0418")),r=a("fd2d"),s=a("7766"),c=a("2dbd"),u=a("85b1"),l=a("4328"),m=a.n(l),f={data:function(){return{numArrowLeft:1,accountNumber:"",show:!1,value:"",imgurl:"",imgurl1:"",uploadMask:!1,timeout:null,times:60,phoneMess:"获取验证码",isclick:!1,apiUrl:this.$store.state.apiDomain,staUrl:this.$store.state.staticDomain}},components:{Header:o["a"],Footer:r["a"],popup:s["a"]},created:function(){},mounted:function(){this.onLoad()},methods:{keyshow:function(){var t=document.body.scrollHeight||document.documentElement.scrollHeight;window.scrollTo({top:t,behavior:"smooth"})},postmess:Object(u["a"])((function(){var t=this;if(!t.accountNumber)return t.$toast("请输入账号");t.isclick||c["a"].post("".concat(t.apiUrl,"/smsSend"),m.a.stringify({mobile:t.accountNumber,type:"register"})).then((function(e){t.setTimes();var a=e.data;1===a.status?t.$toast("发送成功"):(clearInterval(t.timeout),t.$toast({message:a.message,forbidClick:!0,overlay:!0}))})).catch((function(e){clearInterval(t.timeout)}))}),5e3,{leading:!0,trailing:!1}),setTimes:function(){var t=this;t.timeout=setInterval((function(){t.times>0?(t.times--,t.phoneMess=t.times+"s",t.isclick=!0):(t.times=60,clearInterval(t.timeout),t.isclick=!1,t.phoneMess="获取验证码")}),1e3)},paymentSaveBtn:function(){var t=this;if(t.value){var e=t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});c["a"].post("".concat(this.apiUrl,"/addPaymentType"),m.a.stringify({prove_img:this.imgurl,account:this.accountNumber})).then((function(a){e.clear();var n=a.data;1===n.status?t.$toast({message:n.message,onClose:function(){t.$router.replace("/payment")}}):t.$toast(n.message)})).catch((function(t){e.clear()}))}else t.$toast("验证码为空")},onarrowLeftClick:function(t){1===this.numArrowLeft&&this.$router.go(-1)},afterRead:function(t){this.uploadMask=!0,this.uploadFile(t)},uploadFile:function(t){var e=this,a=this,n=new FormData;n.append("img",t.file),c["a"].post("".concat(this.apiUrl,"/uploadImage"),n).then((function(n){var i=n.data;e.uploadMask=!1,1===i.status?(a.imgurl="".concat(i.info.filename),a.imgurl1=t.content):a.$toast({forbidClick:!0,message:i.message})}))},onLoad:function(){var t=this,e=t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});c["a"].get("".concat(this.apiUrl,"/getPaymentType")).then((function(a){var n=a.data;if(1===n.status)t.accountNumber=n.info.account||0,t.imgurl="".concat(n.info.payment_img||""),t.imgurl1="".concat(t.staUrl).concat(n.info.payment_img||"");else{var i=t.$toast(n.message);i.clear()}e.clear()})).catch((function(t){e.clear()}))}}},p=f,d=(a("ee4d"),a("2877")),v=Object(d["a"])(p,n,i,!1,null,null,null);e["default"]=v.exports},"5ea3":function(t,e,a){"use strict";(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e["a"]=a}).call(this,a("c8ba"))},"85b1":function(t,e,a){"use strict";function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var i=n,o=a("5ea3"),r="object"==typeof self&&self&&self.Object===Object&&self,s=o["a"]||r||Function("return this")(),c=s,u=function(){return c.Date.now()},l=u,m=c.Symbol,f=m,p=Object.prototype,d=p.hasOwnProperty,v=p.toString,b=f?f.toStringTag:void 0;function g(t){var e=d.call(t,b),a=t[b];try{t[b]=void 0;var n=!0}catch(o){}var i=v.call(t);return n&&(e?t[b]=a:delete t[b]),i}var h=g,y=Object.prototype,k=y.toString;function w(t){return k.call(t)}var C=w,$="[object Null]",j="[object Undefined]",_=f?f.toStringTag:void 0;function T(t){return null==t?void 0===t?j:$:_&&_ in Object(t)?h(t):C(t)}var O=T;function N(t){return null!=t&&"object"==typeof t}var S=N,M="[object Symbol]";function x(t){return"symbol"==typeof t||S(t)&&O(t)==M}var I=x,F=NaN,U=/^\s+|\s+$/g,L=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,E=/^0o[0-7]+$/i,H=parseInt;function P(t){if("number"==typeof t)return t;if(I(t))return F;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(U,"");var a=D.test(t);return a||E.test(t)?H(t.slice(2),a?2:8):L.test(t)?F:+t}var z=P,A="Expected a function",B=Math.max,J=Math.min;function R(t,e,a){var n,o,r,s,c,u,m=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new TypeError(A);function v(e){var a=n,i=o;return n=o=void 0,m=e,s=t.apply(i,a),s}function b(t){return m=t,c=setTimeout(y,e),f?v(t):s}function g(t){var a=t-u,n=t-m,i=e-a;return p?J(i,r-n):i}function h(t){var a=t-u,n=t-m;return void 0===u||a>=e||a<0||p&&n>=r}function y(){var t=l();if(h(t))return k(t);c=setTimeout(y,g(t))}function k(t){return c=void 0,d&&n?v(t):(n=o=void 0,s)}function w(){void 0!==c&&clearTimeout(c),m=0,n=u=o=c=void 0}function C(){return void 0===c?s:k(l())}function $(){var t=l(),a=h(t);if(n=arguments,o=this,u=t,a){if(void 0===c)return b(u);if(p)return clearTimeout(c),c=setTimeout(y,e),v(u)}return void 0===c&&(c=setTimeout(y,e)),s}return e=z(e)||0,i(a)&&(f=!!a.leading,p="maxWait"in a,r=p?B(z(a.maxWait)||0,e):r,d="trailing"in a?!!a.trailing:d),$.cancel=w,$.flush=C,$}e["a"]=R},be78:function(t,e,a){},ee4d:function(t,e,a){"use strict";var n=a("be78"),i=a.n(n);i.a}}]);