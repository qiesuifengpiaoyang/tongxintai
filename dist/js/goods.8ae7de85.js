(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods"],{"159b":function(t,o,e){var s=e("da84"),n=e("fdbc"),i=e("17c2"),c=e("9112");for(var a in n){var r=s[a],p=r&&r.prototype;if(p&&p.forEach!==i)try{c(p,"forEach",i)}catch(l){p.forEach=i}}},"17c2":function(t,o,e){"use strict";var s=e("b727").forEach,n=e("a640"),i=e("ae40"),c=n("forEach"),a=i("forEach");t.exports=c&&a?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},1912:function(t,o,e){},2532:function(t,o,e){"use strict";var s=e("23e7"),n=e("5a34"),i=e("1d80"),c=e("ab13");s({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~String(i(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},3835:function(t,o,e){"use strict";function s(t){if(Array.isArray(t))return t}e.d(o,"a",(function(){return a}));e("a4d3"),e("e01a"),e("d28b"),e("d3b7"),e("3ca3"),e("ddb0");function n(t,o){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],s=!0,n=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(s=(c=a.next()).done);s=!0)if(e.push(c.value),o&&e.length===o)break}catch(r){n=!0,i=r}finally{try{s||null==a["return"]||a["return"]()}finally{if(n)throw i}}return e}}var i=e("06c5");function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,o){return s(t)||n(t,o)||Object(i["a"])(t,o)||c()}},4160:function(t,o,e){"use strict";var s=e("23e7"),n=e("17c2");s({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4de4":function(t,o,e){"use strict";var s=e("23e7"),n=e("b727").filter,i=e("1dde"),c=e("ae40"),a=i("filter"),r=c("filter");s({target:"Array",proto:!0,forced:!a||!r},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5161:function(t,o,e){"use strict";var s=e("1912"),n=e.n(s);n.a},"5a34":function(t,o,e){var s=e("44e7");t.exports=function(t){if(s(t))throw TypeError("The method doesn't accept regular expressions");return t}},a15b:function(t,o,e){"use strict";var s=e("23e7"),n=e("44ad"),i=e("fc6a"),c=e("a640"),a=[].join,r=n!=Object,p=c("join",",");s({target:"Array",proto:!0,forced:r||!p},{join:function(t){return a.call(i(this),void 0===t?",":t)}})},ab13:function(t,o,e){var s=e("b622"),n=s("match");t.exports=function(t){var o=/./;try{"/./"[t](o)}catch(e){try{return o[n]=!1,"/./"[t](o)}catch(s){}}return!1}},ade3:function(t,o,e){"use strict";function s(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}e.d(o,"a",(function(){return s}))},b64b:function(t,o,e){var s=e("23e7"),n=e("7b0b"),i=e("df75"),c=e("d039"),a=c((function(){i(1)}));s({target:"Object",stat:!0,forced:a},{keys:function(t){return i(n(t))}})},caad:function(t,o,e){"use strict";var s=e("23e7"),n=e("4d64").includes,i=e("44d2"),c=e("ae40"),a=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!a},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},dbb4:function(t,o,e){var s=e("23e7"),n=e("83ab"),i=e("56ef"),c=e("fc6a"),a=e("06cf"),r=e("8418");s({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var o,e,s=c(t),n=a.f,p=i(s),l={},u=0;while(p.length>u)e=n(s,o=p[u++]),void 0!==e&&r(l,o,e);return l}})},e439:function(t,o,e){var s=e("23e7"),n=e("d039"),i=e("fc6a"),c=e("06cf").f,a=e("83ab"),r=n((function(){c(1)})),p=!a||r;s({target:"Object",stat:!0,forced:p,sham:!a},{getOwnPropertyDescriptor:function(t,o){return c(i(t),o)}})},e524:function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"tx-dx-goods"},[e("div",{staticClass:"top-stick-box"},[e("svg",{staticClass:"icon-left-full-fill",staticStyle:{"vertical-align":"middle",fill:"currentColor",overflow:"hidden"},attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1745"},on:{click:function(o){return o.stopPropagation(),t.onClickLeftIcon(o)}}},[e("path",{attrs:{d:"M512 149.333333c200.298667 0 362.666667 162.368 362.666667 362.666667s-162.368 362.666667-362.666667 362.666667S149.333333 712.298667 149.333333 512 311.701333 149.333333 512 149.333333z m42.666667 168.085334L360.085333 512 554.666667 706.581333 599.914667 661.333333l-149.333334-149.333333 149.333334-149.333333L554.666667 317.418667z","p-id":"1746"}})]),e("van-icon",{attrs:{name:"more"},on:{click:t.onClickRight}})],1),e("div",[e("van-swipe",{staticClass:"swiper-n2",attrs:{"show-indicators":!1},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[e("div",{staticClass:"custom-indicator"},[t._v(t._s(t.current+1)+"/"+t._s(t.currentlen))])]},proxy:!0}])},t._l(t.goods.carousel_img,(function(o,s){return e("van-swipe-item",{key:s},[e("a",{attrs:{href:"javascript:;"}},[e("img",{attrs:{src:o,alt:t.goods.title}})])])})),1),e("div",{staticClass:"goods-tit"},[e("div",{staticClass:"tit-price"},[e("span",{staticClass:"item1"},[e("i",[t._v("¥")]),e("span",{staticClass:"item1_1"},[t._v(t._s(2===+t.type?t.goods.group_price:t.goods.price||"0.00"))]),e("span",{staticClass:"item1_2"},[e("del",[t._v("¥"+t._s(t.goods.market_price||"0.00"))])])]),t.goods.ticket?e("span",{staticClass:"item2"},[t._v("返券"+t._s(t.goods.ticket))]):t._e()]),e("div",{staticClass:"tit-text"},[t._v(t._s(t.goods.title))]),e("div",{staticClass:"tit-plu-10"},t._l(t.goods.label,(function(o,s){return e("van-tag",{key:s,attrs:{type:"success"}},[t._v(t._s(o))])})),1),t.filgose(t.goods.service)?e("div",{staticClass:"tit-plu-1"},[e("span",[t._v(t._s(t.filgose(t.goods.service)))])]):t._e()]),2!==+t.type?e("van-cell",{staticClass:"goods-config",attrs:{title:"已选",value:t.spec_config_value_copy,"is-link":""},on:{click:t.spec_config_cl}}):t._e(),this.evaluateArr.length>0?e("div",{staticClass:"goods-evaluate"},[e("van-cell",{staticClass:"evaluate-lan",attrs:{title:"商品评价",value:"查看全部","is-link":""},on:{click:t.evaluate_cl}}),e("ul",t._l(t.evaluateArr,(function(o,s){return e("li",{key:s},[e("div",{staticClass:"hed"},[e("img",{attrs:{src:o.head_img,alt:""}}),e("span",[t._v(t._s(o.username))])]),e("div",{staticClass:"con"},[t._v(t._s(o.comment))])])})),0)],1):t._e(),e("div",{staticClass:"goods-detail"},[e("div",{staticClass:"hed"},[t._v("商品详情")]),e("div",{domProps:{innerHTML:t._s(t.goods.detail)}})])],1),e("van-action-sheet",{staticClass:"spec_config_plu-1",model:{value:t.spec_config_show,callback:function(o){t.spec_config_show=o},expression:"spec_config_show"}},[e("div",{staticClass:"hed"},[e("img",{staticClass:"hed-img",attrs:{src:t.goods.cover_img,alt:""}}),e("div",{staticClass:"hed-box"},[e("div",[+t.spec_opt_money?e("p",{staticClass:"item1"},[(t.goods.spec_type,[e("small",[t._v("¥")]),t._v(t._s(t.spec_opt_money)+" ")])],2):t._e(),e("p",{staticClass:"item2"},[t._v(" 已选： "),1===t.goods.spec_type?[t._v(" "+t._s(t.spec_config_num)+"个 ")]:[e("span",[t._v(t._s(t.spec_opt_val))]),t.spec_config_num?e("span",[t._v("，"+t._s(t.spec_config_num)+"个")]):t._e()]],2)]),e("van-icon",{staticClass:"hed-close",attrs:{name:"close"},on:{click:function(o){return t.spec_config_cl(1)}}})],1)]),2===t.goods.spec_type?e("div",t._l(t.goods.spec,(function(o,s){return e("div",{key:s,staticClass:"con-list-1"},[e("div",{staticClass:"con-h-1"},[t._v(t._s(o.title)+"：")]),e("ul",{staticClass:"con-c-1"},t._l(o.list,(function(n,i){return e("li",{key:i,class:[i===o.specid?"on":""],on:{click:function(e){return t.spec_config_radio_cl(o,n,i,s,t.goods.spec.length)}}},[t._v(" "+t._s(n)+" ")])})),0)])})),0):t._e(),e("div",{staticClass:"con-list-2"},[e("div",[t._v("数量：")]),e("van-stepper",{attrs:{"disable-input":""},on:{change:t.spec_config_num_cl},model:{value:t.spec_config_num,callback:function(o){t.spec_config_num=o},expression:"spec_config_num"}})],1),e("div",{staticClass:"btn",on:{click:t.spec_config_btn}},[t._v("加入购物车")])]),e("van-goods-action",{staticClass:"shop-btn-box"},[e("van-goods-action-icon",{attrs:{icon:"share",text:"分享"},on:{click:t.onShare}}),e("van-goods-action-icon",{staticClass:"shopche1",attrs:{icon:"cart-o",text:"购物车",badge:t.shop_num},on:{click:t.spec_shop_num_cl}},[e("span",{class:["shopche-ani",t.shopanibool?"on":""]},[t._v("+"+t._s(t.spec_config_num))]),e("span",[t._v("购物车")])]),2===+t.type?e("van-goods-action-button",{staticClass:"shop-btn-dan",attrs:{type:"danger",text:"发起拼团"},on:{click:t.onTuanlist}}):e("van-goods-action-button",{staticClass:"shop-btn-warn",attrs:{type:"warning",text:"加入购物车"},on:{click:t.spec_config_cl}})],1),e("more-btn",{attrs:{showpop:t.showpop},on:{"update:showpop":function(o){t.showpop=o}}}),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelectShare},model:{value:t.showShare,callback:function(o){t.showShare=o},expression:"showShare"}}),e("van-popup",{attrs:{"get-container":"body"},model:{value:t.showcanvasrq,callback:function(o){t.showcanvasrq=o},expression:"showcanvasrq"}},[e("canvas",{attrs:{id:"canvasrq"}})]),e("popup")],1)},n=[],i=(e("99af"),e("4160"),e("caad"),e("a15b"),e("d81d"),e("b64b"),e("d3b7"),e("2532"),e("3ca3"),e("159b"),e("ddb0"),e("3835")),c=(e("a4d3"),e("4de4"),e("e439"),e("dbb4"),e("ade3"));function a(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);o&&(s=s.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,s)}return e}function r(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?a(Object(e),!0).forEach((function(o){Object(c["a"])(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}var p=e("4328"),l=e.n(p),u=e("2dbd"),f=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("van-popup",{staticClass:"scgood-plu-01",attrs:{value:t.showpop,"overlay-style":{background:"rgba(0,0,0,0)"}},on:{"click-overlay":t.clickoverlay}},[e("ul",[e("li",{on:{click:function(o){return t.gohref(1)}}},[e("van-icon",{attrs:{name:"home-o"}}),e("span",[t._v("首页")])],1),e("li",{on:{click:function(o){return t.gohref(2)}}},[e("van-icon",{attrs:{name:"shopping-cart-o"}}),e("span",[t._v("购物车")])],1),e("li",{on:{click:function(o){return t.gohref(3)}}},[e("van-icon",{attrs:{name:"apps-o"}}),e("span",[t._v("分类搜索")])],1),e("li",{on:{click:function(o){return t.gohref(4)}}},[e("van-icon",{attrs:{name:"contact"}}),e("span",[t._v("个人中心")])],1)])])},_=[],d=(e("ac1f"),e("5319"),{data:function(){return{}},props:{showpop:{}},mounted:function(){},methods:{gohref:function(t){1===t?this.$router.replace({name:"index2"}):2===t?this.$router.replace({name:"shopcat"}):3===t?this.$router.replace({name:"classification",params:{type:1}}):4===t&&this.$router.replace({name:"personal"})},clickoverlay:function(){this.$emit("update:showpop",!1)}}}),h=d,v=e("2877"),g=Object(v["a"])(h,f,_,!1,null,null,null),m=g.exports,b=e("b311"),y=e.n(b),w=e("d055"),k=e.n(w),C=e("7766"),j={data:function(){return{apiUrl:this.$store.state.apiDomain,staticUrl:this.$store.state.staticDomain,showcanvasrq:!1,showShare:!1,offsettop:"0",showpop:!1,shopanibool:!1,sheetShow:!1,current:0,currentlen:0,errtext:"",spec_config_show:!1,spec_config_value:"种类规格",spec_config_value_copy:"请选择种类规格",spec_config_obj:{},spec_config_price:0,spec_config_stock:0,spec_config_num:1,commodity_id:this.$route.params.id,type:this.$route.params.type,liindex:0,liind:0,liarr:[],shop_num:"",shop_num_ar:[],evaluateArr:[],goods:{},spec_config_radio_arr:[],spec_opt_arr:[],spec_opt_obj:{},spec_opt_val:"种类规格",spec_opt_money:"",spec_opt_shop:[],actions:[],options:[[{name:"复制链接",icon:"link",id:1,className:"clipboardUrl"},{name:"二维码",icon:"qrcode",id:2,className:"rqUrl"}]]}},components:{moreBtn:m,popup:C["a"]},mounted:function(){this.firstAPI()},methods:{onShare:function(){this.showShare=!this.showShare},onSelectShare:function(t){var o=this;1===t.id?o.$nextTick((function(){var t=new y.a(".clipboardUrl",{text:function(){return window.location.href}});t.on("success",(function(e){o.$toast({message:"复制成功",forbidClick:!0}),e.clearSelection(),t.destroy()})),t.on("error",(function(e){o.$toast({message:"该浏览器不支持自动复制",forbidClick:!0}),t.destroy()}))})):2===t.id&&(o.showcanvasrq=!0,o.$nextTick((function(){var t=document.getElementById("canvasrq");k.a.toCanvas(t,"".concat(window.location.href),{width:200,margin:2},(function(t){}))}))),o.showShare=!1},onClickLeftIcon:function(){this.$router.go(-1)},onClickRight:function(){this.showpop=!this.showpop},evaluate_cl:function(){this.$router.push({name:"evaluate",params:{commodity_id:this.commodity_id}})},spec_shop_num_cl:function(){this.$router.push({name:"shopcat"})},onClickIconMore:function(){},onShoplist:function(){var t=this,o=t.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});u["a"].post("".concat(this.apiUrl,"/addShoppingCart"),l.a.stringify({type:t.type,commodity_id:t.commodity_id,num:t.spec_config_num,spec:t.filter_spec_opt_shop()})).then((function(e){var s=e.data,n=(s.status,s.message);s.info;o.clear(),t.$toast("".concat(n))}))},onTuanlist:function(){var t=this,o=t.$toast.loading({duration:0,message:"创建中...",forbidClick:!0});u["a"].post("".concat(this.apiUrl,"/team/add"),l.a.stringify({commodity_id:t.commodity_id})).then((function(e){var s=e.data,n=s.status,i=s.message;s.info;o.clear(),t.$toast("".concat(i)),1===n&&t.$router.push({name:"makelist"})}))},spec_config_num_cl:function(t){t>200?(this.$toast("最多200个"),this.spec_config_num=200):this.spec_config_num=t},spec_config_radio_cl:function(t,o,e,s,n){this.$set(this.goods.spec,s,t);var i=r({},this.spec_opt_obj);t.specid===e?(t.specid="999".concat(s),this.$delete(this.spec_opt_obj,s)):(t.specid=e,i[s]={value:o},this.spec_opt_obj=i);var c=Object.keys(this.spec_opt_obj),a=c.length;a===n&&(this.spec_opt_val=this.filter_spec_opt(this.spec_opt_obj).join("，"),this.spec_opt_money=this.filter_spec_opt_money_val(this.goods.spec_config,this.filter_spec_opt(this.spec_opt_obj).join(""),this.spec_config_num))},spec_config_btn:function(){if(1===this.goods.spec_type)this.spec_config_cl(),this.spec_config_value_copy="".concat(this.spec_config_num,"个");else{if(["0","0.00",0,""].includes(this.spec_opt_money))return void this.$toast("请选择规格");this.spec_config_value_copy="".concat(this.spec_opt_val,",").concat(this.spec_config_num,"个"),this.spec_config_cl()}this.onShoplist()},spec_config_cl:function(t){var o=this;this.spec_config_show=!this.spec_config_show,1!==t&&(this.spec_config_show?this.shopanibool=!1:setTimeout((function(){o.shopanibool=!0}),500))},onChange:function(t){this.current=t},firstAPI:function(){var t=this,o=t.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});Promise.all([u["a"].post("".concat(this.apiUrl,"/detail"),l.a.stringify({type:t.type,id:t.commodity_id})),u["a"].post("".concat(this.apiUrl,"/comment"),l.a.stringify({commodity_id:t.commodity_id,page:1,limit:2}))]).then((function(e){o.clear();var s=Object(i["a"])(e,3),n=s[0],c=s[1],a=(s[2],n.data),p=c.data,l="";if(1===a.status){var u=r({},a.info);2===u.spec_type?(u.spec=t.filter2spec(u.spec),u.spec_config=t.filter_spec_opt_money(u.spec_config)):t.spec_opt_money=u.price,t.currentlen=Array.isArray(u.carousel_img)?u.carousel_img.length:0,t.goods=u}else l+=a.message;1===p.status?t.evaluateArr=p.info:l+=","+p.message,1===p.status&&1===a.status||t.$toast("".concat(l))}))},filter1:function(t){var o="",e=r({},t),s=specfield;for(var n in e)s.includes(n)||(o+="".concat(e[n]));return o},filgose:function(t){return Array.isArray(t)?t.join(" . "):""},filter2spec:function(t){var o=[];return t.map((function(t,e){t.specid="999".concat(e),o.push(t)})),o},filter_spec_opt:function(t){var o=[];return Object.keys(t).forEach((function(e){o.push(t[e].value)})),o},filter_spec_opt_money_val:function(t,o,e){var s=this,n=0,i=specfield,c=[];return t.forEach((function(t){if(t.strd===o){for(var e in n=t.price,t)i.includes(e)||c.push("".concat(e,":").concat(t[e]));s.spec_opt_shop=c}})),n},filter_spec_opt_shop:function(){return 2===this.goods.spec_type?this.spec_opt_shop.join(","):""},filter_spec_opt_money:function(t){var o=specfield,e=[];return t.forEach((function(t){var s="";for(var n in t)o.includes(n)||(s+="".concat(t[n]));t.strd=s,e.push(t)})),e}}},O=j,x=(e("5161"),Object(v["a"])(O,s,n,!1,null,null,null));o["default"]=x.exports}}]);