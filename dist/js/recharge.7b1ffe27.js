(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["recharge"],{"218b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-radio-group",{staticClass:"cellradiolist",model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[s("van-cell-group",[s("van-cell",{attrs:{title:"支付方式",size:"large"}}),s("van-cell",{staticClass:"alipay",attrs:{title:"支付宝",icon:"alipay",clickable:""},on:{click:function(e){return t.radiocl("1")}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-radio",{attrs:{name:"1"}})]},proxy:!0}])}),s("van-cell",{staticClass:"wechat",attrs:{title:"微信",icon:"wechat",clickable:""},on:{click:function(e){return t.radiocl("2")}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-radio",{attrs:{name:"2"}})]},proxy:!0}])})],1)],1)},o=[],r={name:"typepay",data:function(){return{radio1:this.radio}},props:{radio:{default:"1"}},methods:{radiocl:function(t){this.$emit("onRadiocl",t)}}},i=r,n=(s("8730"),s("2877")),c=Object(n["a"])(i,a,o,!1,null,"256368ec",null);e["a"]=c.exports},"2faa":function(t,e,s){},3835:function(t,e,s){"use strict";function a(t){if(Array.isArray(t))return t}s.d(e,"a",(function(){return n}));s("a4d3"),s("e01a"),s("d28b"),s("d3b7"),s("3ca3"),s("ddb0");function o(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var s=[],a=!0,o=!1,r=void 0;try{for(var i,n=t[Symbol.iterator]();!(a=(i=n.next()).done);a=!0)if(s.push(i.value),e&&s.length===e)break}catch(c){o=!0,r=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(o)throw r}}return s}}var r=s("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){return a(t)||o(t,e)||Object(r["a"])(t,e)||i()}},5871:function(t,e,s){"use strict";var a=s("2faa"),o=s.n(a);o.a},8730:function(t,e,s){"use strict";var a=s("9e24"),o=s.n(a);o.a},"9e24":function(t,e,s){},a977:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"recharge-wrapper"},[s("van-nav-bar",{staticClass:"navbar",attrs:{border:!1,title:"充值","left-arrow":""},on:{"click-left":t.onClickLeft}}),t.pageshow?s("div",[s("div",{staticClass:"re-hed"},[t.idshow?s("div",{staticClass:"re-hed-1"},[s("span",{staticClass:"bm"},[t._v(t._s(t.reqTitle))])]):s("div",{staticClass:"re-hed-2"},[s("van-dropdown-menu",{attrs:{"active-color":"#ee0a24"}},[s("van-dropdown-item",{attrs:{options:t.option1},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1)]),s("van-cell-group",{staticClass:"re-con"},[s("van-cell-group",[s("van-field",{attrs:{label:"姓名",placeholder:"请输入姓名",readonly:t.readonly},model:{value:t.sess_name,callback:function(e){t.sess_name=e},expression:"sess_name"}}),s("van-field",{attrs:{label:"身份证号码",placeholder:"请输入身份证号码",readonly:t.readonly},model:{value:t.sess_carid,callback:function(e){t.sess_carid=e},expression:"sess_carid"}})],1)],1),t.treatyIf?s("div",{staticClass:"convention"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.treatyCheckbox,expression:"treatyCheckbox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.treatyCheckbox)?t._i(t.treatyCheckbox,null)>-1:t.treatyCheckbox},on:{change:function(e){var s=t.treatyCheckbox,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=null,i=t._i(s,r);a.checked?i<0&&(t.treatyCheckbox=s.concat([r])):i>-1&&(t.treatyCheckbox=s.slice(0,i).concat(s.slice(i+1)))}else t.treatyCheckbox=o}}}),s("span",{on:{click:t.treatyBtn}},[t._v(t._s(t.treatyTitle))])]):t._e(),t.inform1?s("van-notice-bar",{staticClass:"tipsd",attrs:{scrollable:!1,wrapable:!0,"left-icon":"volume-o",text:"康养帮和老互帮必须要一起充值才能够享受其中一项"}}):t._e(),t.inform2?s("van-notice-bar",{staticClass:"tipsd",attrs:{scrollable:!1,wrapable:!0,"left-icon":"volume-o",text:"终互帮和老互帮必须要一起充值才能够享受"}}):t._e(),s("ul",{staticClass:"re-list"},t._l(t.colyue[t.diji],(function(e,a,o){return s("li",{key:a},[a<"999999"?s("div",{class:[t.inde===o+1?"on":"","re-in-0","re-in-"+(o+1)],on:{click:function(e){return t.remoneyCl(a,o)}}},["首次办理"===e?s("i",[t._v("推荐")]):t._e(),s("span",[t._v(t._s(a))]),s("span",[t._v(" "+t._s(e)+" ")])]):t._e(),"999999"===a?s("div",{class:[t.inde===o+1?"on":"","re-in-0","re-in-"+(o+1)],on:{click:function(e){return t.remoneyCl(a,o)}}},[s("van-field",{ref:"moremoneyInp",refInFor:!0,attrs:{placeholder:"更多金额"},on:{input:t.inpCl},model:{value:t.mangl,callback:function(e){t.mangl=e},expression:"mangl"}})],1):t._e()])})),0),s("type-pay",{attrs:{radio:t.paytype},on:{onRadiocl:t.onRadiocl}}),s("div",{staticClass:"btn",on:{click:t.btnCl}},[t._v("立即支付")])],1):t._e(),s("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[s("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){t.showPicker=!1},confirm:t.onConfirm}})],1),t.passwordBoxState?s("div",{staticClass:"passwordBox"},[s("div",{staticClass:"password"},[s("p",[t._v("请验证登录密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"text",placeholder:"请输入您的登录密码用来验证！"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("div",{staticClass:"passwordSelect"},[s("input",{attrs:{type:"button",value:"取消"},on:{click:function(e){t.passwordBoxState=!t.passwordBoxState}}}),s("input",{attrs:{type:"button",value:"确定"},on:{click:t.passwordBtn}})])])]):t._e(),s("popup")],1)},o=[],r=(s("d81d"),s("b0c0"),s("b64b"),s("d3b7"),s("3ca3"),s("ddb0"),s("96cf"),s("1da1")),i=s("3835"),n=s("2dbd"),c=s("218b"),l=s("7766"),u=s("4328"),d=s.n(u),p={data:function(){return{passwordBoxState:!1,password:"",mangl:"",treatyIf:!1,diji:parseInt(this.$route.query.type)||1,rtype:this.$route.query.type,inform1:!1,inform2:!1,treatyTitle:"",routerPath:"",treatyCheckbox:!1,jr:!1,pageshow:!1,list:[],moremoney:"",type:parseInt(sessionStorage.getItem("Rtype"))||0,option1:[{text:"请选择互助类型",value:0}],id:0,idshow:!1,readonly:!1,reqTitle:"",sess_name:sessionStorage.getItem("sess_name")||"",sess_carid:sessionStorage.getItem("sess_carid")||"",sess_moeny:"",moenyshow:!0,money:0,inde:parseInt(sessionStorage.getItem("inde"))||2,user_id:"",showPicker:!1,columns:[],colyue:{},paytype:sessionStorage.getItem("paytype")||"1",apiUrl:this.$store.state.apiDomain,staticUrl:this.$store.state.staticDomain,toast1:""}},components:{TypePay:c["a"],popup:l["a"]},updated:function(){1==this.$route.query.type||1==this.type||2==this.$route.query.type||2==this.type?this.inform1=!0:this.inform1=!1,1==this.type?(this.treatyIf=!0,this.treatyTitle="我已阅读并同意《康养帮公约》",this.routerPath="convention"):3==this.type?(this.treatyIf=!0,this.treatyTitle="我已阅读并同意《终互帮公约》",this.routerPath="endHelp"):2==this.type?(this.treatyIf=!0,this.treatyTitle="我已阅读并同意《老互帮公约》",this.routerPath="oldHelp"):this.treatyIf=!1,3==this.$route.query.type||3==this.type?this.inform2=!0:this.inform2=!1},mounted:function(){"applyhelp"===this.$route.query.fr?(this.sess_carid=sessionStorage.getItem("card_id"),this.sess_name=sessionStorage.getItem("name"),this.sess_moeny=sessionStorage.getItem("available_amount"),this.id=this.$route.query.id,this.idshow=!0,this.readonly=!0,this.type=this.$route.query.type,this.reqTitle=decodeURIComponent(this.$route.query.text)):"dibu"===this.$route.query.fr?(this.readonly=!1,this.moenyshow=!1):"topbu"===this.$route.query.fr&&(this.sess_carid=this.$route.query.card_id,this.sess_name=decodeURIComponent(this.$route.query.name),this.sess_moeny=this.$route.query.available_amount,this.id=this.$route.query.id,this.idshow=!0,this.readonly=!0,this.type=this.$route.query.type,this.reqTitle=decodeURIComponent(this.$route.query.text)),this.sess_carid?this.jr=!0:this.jr=!1,this.firstApi()},methods:{treatyBtn:function(){sessionStorage.setItem("Rtype",this.type),sessionStorage.setItem("inde",this.inde),sessionStorage.setItem("money",this.money),sessionStorage.setItem("paytype",this.paytype),sessionStorage.setItem("sess_name",this.sess_name),sessionStorage.setItem("sess_carid",this.sess_carid),this.$router.push("".concat(this.routerPath))},onRadiocl:function(t){this.paytype=t},firstApi:function(){var t=this,e=this,s=e.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});Promise.all([n["a"].get("".concat(e.apiUrl,"/ehelp")),n["a"].get("".concat(e.apiUrl,"/getChargeMoney"))]).then((function(a){var o=Object(i["a"])(a,2),r=o[0],n=o[1];if(e.pageshow=!0,1===r.data.status){try{e.reqId=e.$route.query.reqId,e.reqId&&(e.reqTitle=JSON.parse(sessionStorage.getItem("reobj")).text,e.type=JSON.parse(sessionStorage.getItem("reobj")).type)}catch(u){}Array.isArray(r.data.info)&&r.data.info.map((function(t,s){var a=Object.create(null);a.text=t.title,a.value=t.id,e.option1.push(a)}))}else e.$toast(r.data.message);if(1===n.data.status){e.colyue=n.data.info;var c=parseInt(t.$route.query.type);for(var l in e.colyue.hasOwnProperty(c)?t.diji=c:t.diji=1,e.colyue[t.diji])"首次办理"==e.colyue[t.diji][l]&&(e.money=l);3===t.diji&&(t.money=Object.keys(t.colyue[3])[1])}else e.$toast(n.data.message);s.clear(),sessionStorage.getItem("money")&&(t.money=parseInt(sessionStorage.getItem("money")),t.mangl=parseInt(sessionStorage.getItem("money"))),sessionStorage.getItem("Rtype")&&(t.diji=parseInt(sessionStorage.getItem("Rtype"))),parseInt(sessionStorage.getItem("inde"))&&(t.inde=parseInt(sessionStorage.getItem("inde")))}))},f1:function(){var t=this;return new Promise((function(e,s){n["a"].post("".concat(t.apiUrl,"/recharge"),d.a.stringify({money:t.money,id:t.id,type:t.type,username:t.sess_name,id_card:t.sess_carid})).then((function(t){var a=t.data;1===a.status?e(a):s(a)})).catch((function(t){s(t)}))}))},f2:function(t){},btnCl:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t,s.type){e.next=4;break}return s.$toast("请选择类型"),e.abrupt("return");case 4:if(s.sess_carid){e.next=7;break}return s.$toast("请输入互助人身份证"),e.abrupt("return");case 7:if(s.sess_name){e.next=10;break}return s.$toast("请输入互助人姓名"),e.abrupt("return");case 10:if(1!=t.type&&3!=t.type){e.next=15;break}if(t.treatyCheckbox){e.next=15;break}return s.$toast("请勾选公约"),e.abrupt("return");case 15:if(s.money){e.next=18;break}return s.$toast("请输入金额"),e.abrupt("return");case 18:if(s.paytype){e.next=21;break}return s.$toast("请选择支付方式"),e.abrupt("return");case 21:3==s.paytype||(a="提示",o="是否确认本次操作",3!=s.diji&&3!=s.type||(a="终互帮爱心安慰卡",o="本卡是【同心台】平台终互帮服务专用卡，持有本卡，在后台一直保持有爱心值不低于5个余值。在亲人不幸逝世，平台按着“终互帮公约”，动员全平台“终互帮”所有余值的成员，向亲人逝世家庭贡献爱心值（平台给现金）进行集体安慰。详情见“终互帮公约”"),s.$dialog.confirm({title:"".concat(a),message:"".concat(o)}).then((function(){s.toast1=s.$toast.loading({message:"提交中...",forbidClick:!0,duration:0}),s.postRecharge()})).catch((function(){})));case 22:case"end":return e.stop()}}),e)})))()},passwordBtn:function(){this.password?this.postRecharge():this.$toast("请输入登陆密码！")},postRecharge:function(){var t=this;t.toast1=t.$toast.loading({message:"提交中...",forbidClick:!0,duration:0}),n["a"].post("".concat(t.apiUrl,"/recharge"),d.a.stringify({money:t.money,id:t.id,type:t.type,password:t.password,username:t.sess_name,id_card:t.sess_carid,paytype:t.paytype})).then((function(e){t.passwordBoxState=!1;var s=e.data;t.toast1.clear(),1===s.status&&3!=t.paytype?(window.location.href=s.info.direct_url,t.$toast("".concat(s.message))):t.$toast("".concat(s.message))})).catch((function(e){t.toast1.clear(),t.$toast(JSON.stringify(e))}))},onConfirm:function(t){this.showPicker=!1,this.pickerTxt=t.text,this.type=t.type},pickerCl:function(){this.showPicker=!0},onClickLeft:function(){window.sessionStorage.removeItem("Rtype"),window.sessionStorage.removeItem("inde"),window.sessionStorage.removeItem("money"),window.sessionStorage.removeItem("paytype"),window.sessionStorage.removeItem("sess_name"),window.sessionStorage.removeItem("sess_carid"),this.$router.go(-1)},inpCl:function(t){this.money=this.mangl},remoneyCl:function(t,e){var s=this;s.inde=e+1,"999999"!==t?(s.money=t,s.mangl=""):s.money=""}},watch:{type:{handler:function(t){for(var e in this.colyue.hasOwnProperty(t)?this.diji=t:this.diji=1,this.inde=2,this.mangl="",this.colyue[this.diji])"首次办理"==this.colyue[this.diji][e]&&(this.money=e);3===t&&(this.money=Object.keys(this.colyue[3])[1])},deep:!0}}},y=p,h=(s("5871"),s("2877")),m=Object(h["a"])(y,a,o,!1,null,null,null);e["default"]=m.exports},b64b:function(t,e,s){var a=s("23e7"),o=s("7b0b"),r=s("df75"),i=s("d039"),n=i((function(){r(1)}));a({target:"Object",stat:!0,forced:n},{keys:function(t){return r(o(t))}})}}]);