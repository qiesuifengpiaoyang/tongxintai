(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-542939e7"],{"0739":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"box"},[e("van-nav-bar",{staticClass:"fbpl",attrs:{title:"天天有奖","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-icon",{attrs:{name:"weapp-nav",size:"18"}})]},proxy:!0}])}),t.declarebox?e("div",{staticClass:"declare"},[e("div",{staticClass:"declare-text"},[e("p",[t._v("免责申明")]),e("div",{domProps:{innerHTML:t._s(t.luckTurntable.declare)}}),e("van-checkbox",{staticClass:"checkbox",model:{value:t.checked,callback:function(n){t.checked=n},expression:"checked"}},[t._v("同意")]),e("div",{staticClass:"btn",on:{click:t.showbtncl}},[t._v("确认")])],1)]):t._e(),e("div",{staticClass:"message"},[e("p",[t._v(" 我的幸运积分："),e("span",[t._v(t._s(t.luckTurntable.luck_integral))])]),e("div",[e("input",{attrs:{type:"button",value:"领取幸运积分"},on:{click:t.getIntegral}}),e("input",{attrs:{type:"button",value:"中奖记录"},on:{click:t.winnerRecord}})])]),e("div",{staticClass:"turntableState"},[0==t.luckTurntable.open?e("p",[t._v("暂无转盘信息")]):t._e(),1==t.luckTurntable.open?e("div",[e("p",[t._v("转盘暂未开启，敬请期待！")]),e("p",[t._v(" 开启倒计时："+t._s(t.timerDate.hours)+"时"+t._s(t.timerDate.minutes)+"分"+t._s(t.timerDate.seconds)+"秒 ")])]):t._e(),2==t.luckTurntable.open?e("p",[t._v("转盘正在进行中！")]):t._e(),3==t.luckTurntable.open?e("p",[t._v("转盘已经结束，请期待下一轮的开启！")]):t._e()]),e("div",{staticClass:"sudokubox"},t._l(t.luckTurntable.prize,(function(n,a){return e("div",{key:n+a,staticClass:"grid",on:{click:function(n){return t.choujiang(a)}}},[e("div",{staticClass:"qian equal",class:{qians:t.choice==a}},[t._m(0,!0),e("div",{staticClass:"textbox"},[t._v("翻")])]),e("div",{staticClass:"hou equal",class:{hous:t.choice==a}},[e("div",{staticClass:"againstbox"},[e("span",[t._v(t._s(t.prizeTitle))])])])])})),0),t.prizewinning?e("div",{staticClass:"prizewinning"},[e("div",{staticClass:"prizewinning-content"},[e("p",[t._v("恭喜您中奖")]),e("p",[t._v(t._s(t.prizeTitle))]),e("div",{staticClass:"prizewinning-inp"},[e("input",{attrs:{type:"button",value:"稍后兑换"},on:{click:function(n){t.prizewinning=!t.prizewinning}}}),e("input",{attrs:{type:"button",value:"前往中奖记录兑换"},on:{click:t.convertibility}})])])]):t._e(),t.winner.length?e("ul",{staticClass:"winner",class:{anim:1==t.animate}},t._l(t.winner,(function(n){return e("li",{key:n.name},[t._v(" 恭喜"),e("span",[t._v(t._s(n.username))]),t._v("于"),e("span",[t._v(t._s(n.create_time))]),t._v("抽中"),e("span",[t._v(t._s(n.money))])])})),0):t._e(),e("div",{staticClass:"explain"},[e("p",[t._v("说明")]),e("div",{domProps:{innerHTML:t._s(t.luckTurntable.introduce)}})]),e("more-btn",{attrs:{showpop:t.showpop},on:{"update:showpop":function(n){t.showpop=n}}})],1)},i=[function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"imgbox"},[a("img",{attrs:{src:e("aecb"),alt:""}})])}],s=(e("99af"),e("d3b7"),e("ac1f"),e("25f0"),e("5319"),e("4328")),o=e.n(s),c=e("a813"),r=e("be3b"),l=e("0cbb"),u={data:function(){return{showpop:!1,checked:!1,declarebox:!0,luckTurntable:[],luckTurntableReal:null,timerDate:[],prizeTitle:null,prizewinning:!1,animate:!1,prizeId:null,winner:[],grid:[1,2,3,4,5,6,7,8,9,10],choice:null,cou:0,toas1:null}},components:{moreBtn:l["a"]},created:function(){var t=this;this.toas1=this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),this.postLuckTurntable(),setInterval(this.showMarquee,300),"true"==localStorage.getItem("tablelen")&&(this.declarebox=!1),this.luckTurntableReal=setInterval((function(){t.postLuckTurntable()}),1e3)},mounted:function(){this.toas1.clear()},methods:{zjzxx:function(){var t=this;r["a"].post("".concat(c["b"],"/turntable/latestInputRecord"),o.a.stringify({turntable_id:parseInt(this.luckTurntable.turntable_id)||0})).then((function(n){var e=n.data,a=e.info,i=e.status,s=e.message;if(console.log(a,"中奖者信息"),1==i){if(a.draw.length&&t.winner.toString()!=a.draw.toString())for(var o=t.winner.length;o<a.draw.length;o++)t.winner.push(a.draw[o])}else t.$toast("".concat(s))}))},postLuckTurntable:function(){var t=this;r["a"].post("".concat(c["b"],"/turntable/luckTurntable")).then((function(n){var e=n.data,a=e.info,i=e.status,s=e.message;1!=i&&t.$toast("".concat(s)),t.luckTurntable=a,1==a.open&&t.countDown(a.open_time),t.zjzxx()}))},countDown:function(t){var n=Math.ceil(Date.now()/1e3),e=this.timestampL(t);this.timerDate=this.getFormatDuration(e-n),console.log(this.timerDate)},showMarquee:function(){this.animate=!0,this.winner.push(this.winner[0]),this.winner.shift(),this.animate=!1},showbtncl:function(){this.checked&&(this.declarebox=!1,localStorage.setItem("tablelen",!0))},getIntegral:function(){var t=this;r["a"].post("".concat(c["b"],"/turntable/luckIntegral")).then((function(n){var e=n.data,a=e.info,i=e.status,s=e.message;1!=i?t.$toast("".concat(s)):t.$toast("".concat(s,"\n").concat(a.luck_integral,"积分"))})),this.postLuckTurntable()},winnerRecord:function(){this.$router.push({name:"recocrd"})},choujiang:function(t){if(this.cou++,!(this.cou>1))return this.luckTurntable.luck_integral?void this.luckLotteryDraw(t):(this.$toast("您的积分不足 \n^_^"),void(this.cou=0));this.$toast("请勿重复点击 \n^_^")},luckLotteryDraw:function(t){var n=this;r["a"].post("".concat(c["b"],"/turntable/luckLotteryDraw"),o.a.stringify({turntable_id:parseInt(this.luckTurntable.turntable_id)})).then((function(e){n.choice=t,console.log(e,"抽奖接口的返回数据");var a=e.data,i=a.info,s=a.message,o=a.status;1==o?1==i.lottery_results?(n.prizeTitle=i.prize_title,n.prizeId=i.draw_id,n.prizewinning=!0):n.prizeTitle="很遗憾未能中奖":n.$toast("".concat(s))})),setTimeout((function(){console.log("打印123"),n.choice=null,n.cou=0}),3e3)},convertibility:function(t){this.prizewinning=!1,this.$router.push("/duihuan/".concat(this.prizeId,"/",0))},timestampL:function(t){var n=t.substring(0,19);n=n.replace(/-/g,"/");var e=new Date(n).getTime();return Math.ceil(e/1e3)},getFormatDuration:function(t){var n=parseInt(t),e=Math.floor(n/3600)<10?"0"+Math.floor(n/3600):Math.floor(n/3600),a=Math.floor(n/60%60)<10?"0"+Math.floor(n/60%60):Math.floor(n/60%60),i=Math.floor(n%60)<10?"0"+Math.floor(n%60):Math.floor(n%60);return{hours:"".concat(e),minutes:"".concat(a),seconds:"".concat(i)}},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){this.showpop=!this.showpop}},beforeDestroy:function(){console.log("离开当前页面的时候，清除定时器"),clearInterval(this.luckTurntableReal)}},p=u,h=(e("a3dd"),e("2877")),d=Object(h["a"])(p,a,i,!1,null,null,null);n["default"]=d.exports},"25f0":function(t,n,e){"use strict";var a=e("6eeb"),i=e("825a"),s=e("d039"),o=e("ad6d"),c="toString",r=RegExp.prototype,l=r[c],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=l.name!=c;(u||p)&&a(RegExp.prototype,c,(function(){var t=i(this),n=String(t.source),e=t.flags,a=String(void 0===e&&t instanceof RegExp&&!("flags"in r)?o.call(t):e);return"/"+n+"/"+a}),{unsafe:!0})},a3dd:function(t,n,e){"use strict";var a=e("f41f"),i=e.n(a);i.a},f41f:function(t,n,e){}}]);