(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orders"],{"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3");var n=r("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(t,e):void 0}}},"159b":function(t,e,r){var n=r("da84"),i=r("fdbc"),a=r("17c2"),o=r("9112");for(var s in i){var c=n[s],l=c&&c.prototype;if(l&&l.forEach!==a)try{o(l,"forEach",a)}catch(d){l.forEach=a}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,i=r("a640"),a=r("ae40"),o=i("forEach"),s=a("forEach");t.exports=o&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},2532:function(t,e,r){"use strict";var n=r("23e7"),i=r("5a34"),a=r("1d80"),o=r("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(a(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),i=r("825a"),a=r("d039"),o=r("ad6d"),s="toString",c=RegExp.prototype,l=c[s],d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(d||f)&&n(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?o.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=r("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||a(t)||Object(o["a"])(t)||s()}},"3ca3":function(t,e,r){"use strict";var n=r("6547").charAt,i=r("69f3"),a=r("7dd0"),o="String Iterator",s=i.set,c=i.getterFor(o);a(String,"String",(function(t){s(this,{type:o,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=n(r,i),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,r){"use strict";var n=r("23e7"),i=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"44e7":function(t,e,r){var n=r("861d"),i=r("c6b6"),a=r("b622"),o=a("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},4552:function(t,e,r){"use strict";var n=r("5d8b"),i=r.n(n);i.a},"4de4":function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").filter,a=r("1dde"),o=r("ae40"),s=a("filter"),c=o("filter");n({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,r){"use strict";var n=r("0366"),i=r("7b0b"),a=r("9bdd"),o=r("e95a"),s=r("50c4"),c=r("8418"),l=r("35a1");t.exports=function(t){var e,r,d,f,u,p,v=i(t),g="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,m=void 0!==b,y=l(v),_=0;if(m&&(b=n(b,h>2?arguments[2]:void 0,2)),void 0==y||g==Array&&o(y))for(e=s(v.length),r=new g(e);e>_;_++)p=m?b(v[_],_):v[_],c(r,_,p);else for(f=y.call(v),u=f.next,r=new g;!(d=u.call(f)).done;_++)p=m?a(f,b,[d.value,_],!0):d.value,c(r,_,p);return r.length=_,r}},5319:function(t,e,r){"use strict";var n=r("d784"),i=r("825a"),a=r("7b0b"),o=r("50c4"),s=r("a691"),c=r("1d80"),l=r("8aa5"),d=r("14c3"),f=Math.max,u=Math.min,p=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,r,n){var b=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=n.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(r,n){var i=c(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,i,n):e.call(String(i),r,n)},function(t,n){if(!b&&m||"string"===typeof n&&-1===n.indexOf(y)){var a=r(e,t,this,n);if(a.done)return a.value}var c=i(t),p=String(this),v="function"===typeof n;v||(n=String(n));var g=c.global;if(g){var C=c.unicode;c.lastIndex=0}var S=[];while(1){var O=d(c,p);if(null===O)break;if(S.push(O),!g)break;var x=String(O[0]);""===x&&(c.lastIndex=l(p,o(c.lastIndex),C))}for(var A="",j=0,$=0;$<S.length;$++){O=S[$];for(var k=String(O[0]),E=f(u(s(O.index),p.length),0),w=[],P=1;P<O.length;P++)w.push(h(O[P]));var I=O.groups;if(v){var T=[k].concat(w,E,p);void 0!==I&&T.push(I);var F=String(n.apply(void 0,T))}else F=_(k,p,E,w,I,n);E>=j&&(A+=p.slice(j,E)+F,j=E+k.length)}return A+p.slice(j)}];function _(t,r,n,i,o,s){var c=n+t.length,l=i.length,d=g;return void 0!==o&&(o=a(o),d=v),e.call(s,d,(function(e,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(c);case"<":s=o[a.slice(1,-1)];break;default:var d=+a;if(0===d)return e;if(d>l){var f=p(d/10);return 0===f?e:f<=l?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):e}s=i[d-1]}return void 0===s?"":s}))}}))},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"5a34":function(t,e,r){var n=r("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5d8b":function(t,e,r){},"6b75":function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))},a15b:function(t,e,r){"use strict";var n=r("23e7"),i=r("44ad"),a=r("fc6a"),o=r("a640"),s=[].join,c=i!=Object,l=o("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(a(this),void 0===t?",":t)}})},a630:function(t,e,r){var n=r("23e7"),i=r("4df4"),a=r("1c7e"),o=!a((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:i})},ab13:function(t,e,r){var n=r("b622"),i=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(n){}}return!1}},b64b:function(t,e,r){var n=r("23e7"),i=r("7b0b"),a=r("df75"),o=r("d039"),s=o((function(){a(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(t){return a(i(t))}})},caad:function(t,e,r){"use strict";var n=r("23e7"),i=r("4d64").includes,a=r("44d2"),o=r("ae40"),s=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!s},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d28b:function(t,e,r){var n=r("746f");n("iterator")},d81d:function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").map,a=r("1dde"),o=r("ae40"),s=a("map"),c=o("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,r){var n=r("23e7"),i=r("83ab"),a=r("56ef"),o=r("fc6a"),s=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,r,n=o(t),i=s.f,l=a(n),d={},f=0;while(l.length>f)r=i(n,e=l[f++]),void 0!==r&&c(d,e,r);return d}})},ddb0:function(t,e,r){var n=r("da84"),i=r("fdbc"),a=r("e260"),o=r("9112"),s=r("b622"),c=s("iterator"),l=s("toStringTag"),d=a.values;for(var f in i){var u=n[f],p=u&&u.prototype;if(p){if(p[c]!==d)try{o(p,c,d)}catch(g){p[c]=d}if(p[l]||o(p,l,f),i[f])for(var v in a)if(p[v]!==a[v])try{o(p,v,a[v])}catch(g){p[v]=a[v]}}}},e01a:function(t,e,r){"use strict";var n=r("23e7"),i=r("83ab"),a=r("da84"),o=r("5135"),s=r("861d"),c=r("9bf2").f,l=r("e893"),d=a.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var f={},u=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof u?new d(t):void 0===t?d():d(t);return""===t&&(f[e]=!0),e};l(u,d);var p=u.prototype=d.prototype;p.constructor=u;var v=p.toString,g="Symbol(test)"==String(d("test")),h=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=v.call(t);if(o(f,t))return"";var r=g?e.slice(7,-1):e.replace(h,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:u})}},e439:function(t,e,r){var n=r("23e7"),i=r("d039"),a=r("fc6a"),o=r("06cf").f,s=r("83ab"),c=i((function(){o(1)})),l=!s||c;n({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})},fb6a:function(t,e,r){"use strict";var n=r("23e7"),i=r("861d"),a=r("e8b5"),o=r("23cb"),s=r("50c4"),c=r("fc6a"),l=r("8418"),d=r("b622"),f=r("1dde"),u=r("ae40"),p=f("slice"),v=u("slice",{ACCESSORS:!0,0:0,1:2}),g=d("species"),h=[].slice,b=Math.max;n({target:"Array",proto:!0,forced:!p||!v},{slice:function(t,e){var r,n,d,f=c(this),u=s(f.length),p=o(t,u),v=o(void 0===e?u:e,u);if(a(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?i(r)&&(r=r[g],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return h.call(f,p,v);for(n=new(void 0===r?Array:r)(b(v-p,0)),d=0;p<v;p++,d++)p in f&&l(n,d,f[p]);return n.length=d,n}})},ff9a:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tx-dx-orders"},[r("div",{staticClass:"ordertab"},[r("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),r("div",t._l(t.stepArr,(function(e,n){return r("span",{key:n,class:[+t.step===e.id?"on":""],on:{click:function(r){return t.jsTabsbar(e.id)}}},[t._v(t._s(e.text))])})),0)],1),r("div",{staticClass:"orderlist-box"},[r("van-list",{attrs:{finished:t.finished},on:{load:t.firstAPI},scopedSlots:t._u([{key:"finished",fn:function(){return[t.finished&&0!==+t.step?r("div",{staticClass:"orders-empty-1"},[t._v("没找到订单？试试"),r("span",{on:{click:t.orderAllCl}},[t._v("查看全部")])]):t._e(),t.finished&&0===+t.step?r("div",{staticClass:"orders-empty-1"},[t._v("您已经没有更多的订单了")]):t._e()]},proxy:!0}]),model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t.list.length>0?r("ul",{staticClass:"orderlist"},t._l(t.list,(function(e,n){return r("li",{key:e.order_id,on:{click:function(r){return t.orderdetailCl(e)}}},[r("div",{staticClass:"hed"},[r("span"),r("span",{staticClass:"hed-2"},[1===e.cancel?[t._v(" 交易已取消 ")]:[t._v(" "+t._s(1===e.step?"交易完成":2===e.step?"待支付":3===e.step?"待发货":4===e.step?"待收货":"待评论")+" ")]],2)]),r("div",{staticClass:"conbox"},[r("div",{staticClass:"item1"},t._l(e.shop.slice(0,4),(function(e,n){return r("div",{key:n,staticClass:"item1_1"},[r("img",{attrs:{src:e.cover_img,alt:""}}),r("p",[t._v(t._s(e.title))])])})),0),r("div",{staticClass:"item2"},[t._v(" 共"+t._s(e.shop.length)+"件 ")])]),r("div",{staticClass:"money"},[r("span",{staticClass:"item1"},[t._v("创建时间："+t._s(e.create_time))]),r("span",{staticClass:"item2"},[t._v("实付："),r("span",[t._v("¥ "+t._s(e.pay_money))])])]),r("div",{staticClass:"btnbox"},[1===e.step?r("div",[1==e.cancel?r("van-button",{staticClass:"bc9c9c9c",attrs:{color:"#151516",hairline:!0,plain:""},on:{click:function(r){return r.stopPropagation(),t.redCallFn(e,97)}}},[t._v("删除订单")]):t._e()],1):t._e(),1!==e.step?r("div",[0===e.cancel&&2===e.step?r("van-button",{attrs:{color:"#e02e24"},on:{click:function(r){return r.stopPropagation(),t.redCallFn(e,100)}}},[t._v("去支付")]):t._e(),0===e.cancel?r("van-button",{staticClass:"bc9c9c9c",attrs:{color:"#151516",hairline:!0,plain:""},on:{click:function(r){return r.stopPropagation(),t.redCallFn(e,99,n)}}},[t._v("取消订单")]):t._e(),1==e.cancel?r("van-button",{staticClass:"bc9c9c9c",attrs:{color:"#151516",hairline:!0,plain:""},on:{click:function(r){return r.stopPropagation(),t.redCallFn(e,97)}}},[t._v("删除订单")]):t._e()],1):t._e(),3===e.step?r("div"):t._e(),4===e.step&&0===e.cancel?r("div",[r("van-button",{attrs:{color:"#e02e24"},on:{click:function(r){return r.stopPropagation(),t.redCallFn(e,93,n)}}},[t._v("确认收货")])],1):t._e(),5===e.step?r("div",[r("van-button",{attrs:{color:"#e02e24"},on:{click:function(r){return r.stopPropagation(),t.redCallFn(e,92,n)}}},[t._v("立即评价")]),r("van-button",{staticClass:"bc9c9c9c",attrs:{color:"#151516",hairline:!0,plain:""},on:{click:function(r){return r.stopPropagation(),t.redCallFn(e,97)}}},[t._v("删除订单")])],1):t._e()])])})),0):t._e(),t.listempty?r("div",{staticClass:"orders-empty"},[r("van-icon",{attrs:{name:"orders-o"}}),r("p",{staticClass:"item1"},[t._v("你还没有相关的订单")])],1):t._e()])],1)])},i=[],a=(r("99af"),r("4de4"),r("caad"),r("a15b"),r("d81d"),r("b64b"),r("ac1f"),r("2532"),r("5319"),r("2909")),o=r("5530"),s=r("4328"),c=r.n(s),l=r("a813"),d=r("be3b"),f={data:function(){return{list:[],listempty:!1,stepArr:[{id:0,text:"全部"},{id:1,text:"已完成"},{id:2,text:"待支付"},{id:3,text:"待发货"},{id:4,text:"待收货"},{id:5,text:"待评价"}],loading:!1,finished:!1,page:0,limit:8,step:this.$route.params.type,cancel:""}},mounted:function(){console.log("修改确认2")},methods:{onClickLeft:function(){this.$router.replace({name:"personal"})},redCallFn:function(t,e,r){var n=this;if(99===e)n.$dialog.confirm({message:"请您再确认一次"}).then((function(){var e=n.$toast.loading({duration:0,message:"订单取消中...",forbidClick:!0});d["a"].post("".concat(l["b"],"/order/cancel"),c.a.stringify({order_id:t.order_id,step:t.step})).then((function(i){e.clear();var a=i.data,s=a.status,c=a.message;if(1===s)if(0===+n.step){var l=Object(o["a"])({},t);l.cancel=1,n.$set(n.list,r,l)}else{var d;d=n.list.filter((function(e){return e.order_id!==t.order_id}));var f=d.length;0===f&&(n.listempty=!0),n.list=d}n.$toast("".concat(c))}))}));else if(97===e)n.$dialog.confirm({title:"确认删除订单？",message:"删除之后订单无法恢复，无法处理您的售后问题，请慎重考虑"}).then((function(){var e=n.$toast.loading({duration:0,message:"订单取消中...",forbidClick:!0});d["a"].post("".concat(l["b"],"/order/delete"),c.a.stringify({order_id:t.order_id})).then((function(r){e.clear();var i,a=r.data,o=a.status,s=a.message;if(1===o){i=n.list.filter((function(e){return e.order_id!==t.order_id}));var c=i.length;0===c&&(n.listempty=!0),n.list=i}n.$toast("".concat(s))}))}));else if(93===e)n.$dialog.confirm({title:"确认收货？",message:"确认收货"}).then((function(){var e=n.$toast.loading({duration:0,message:"收货中...",forbidClick:!0});d["a"].post("".concat(l["b"],"/order/take"),c.a.stringify({order_id:t.order_id})).then((function(i){e.clear();var a=i.data,s=a.status,c=a.message;if(1===s)if(0===+n.step){var l=Object(o["a"])({},t);l.step=5,n.$set(n.list,r,l)}else{var d;d=n.list.filter((function(e){return e.order_id!==t.order_id}));var f=d.length;0===f&&(n.listempty=!0),n.list=d}n.$toast("".concat(c))}))}));else if(92===e){console.log(t);var i=Array.isArray(t.shop)?t.shop:[];0===i.length?n.$toast("系统错误，暂无商品可评论"):1===i.length?(sessionStorage.setItem("shopping",JSON.stringify(i[0])),sessionStorage.setItem("comshop",""),n.$router.push({name:"comments",params:{shopping_id:i[0].shopping_id}})):(sessionStorage.setItem("comshop",JSON.stringify(t.shop)),sessionStorage.setItem("shopping",""),n.$router.push({name:"cachecomments"}))}else if(98===e)n.$router.push({name:"goods",params:{id:t.shop[0].commodity_id,type:t.type}});else if(100===e){var a=n.$toast.loading({duration:0,message:"支付中...",forbidClick:!0});d["a"].get("".concat(l["b"],"/order/pay"),{params:{order_id:t.order_id}}).then((function(t){a.clear();var e=t.data,r=e.status,i=e.message,o=e.info;1===r?window.location.href=o.direct_url:n.$toast("".concat(i))}))}},orderdetailCl:function(t){this.$router.push({name:"order",params:{order_id:t.order_id}})},as:function(t){var e=[];return Object.keys(t).map((function(r){l["c"].includes(r)||e.push(t[r])})),e.join(",")},orderAllCl:function(){this.step=0,this.page=0,this.list=[],this.firstAPI()},jsTabsbar:function(t){+this.step!==t&&(this.$router.replace({name:"orders",params:{type:t}}),this.step=t,this.listempty=!1,this.page=0,this.list=[],this.loading=!0,this.finished=!1,this.firstAPI())},firstAPI:function(){var t=this;t.page=t.page+1;var e=d["a"].cancelToken;d["a"].post("".concat(l["b"],"/order"),c.a.stringify({step:+t.step,page:t.page,limit:10}),{cancelToken:new e((function(e){t.cancel=e}))}).then((function(e){var r,n=e.data,i=n.info,o=n.status,s=n.message;1===o?(i.length<10&&(t.finished=!0),0===i.length&&1===t.page&&(t.listempty=!0),i.length>0&&(t.list=(r=t.list).concat.apply(r,Object(a["a"])(i)))):(t.$toast("".concat(s)),t.finished=!0);t.loading=!1}))}}},u=f,p=(r("4552"),r("2877")),v=Object(p["a"])(u,n,i,!1,null,null,null);e["default"]=v.exports}}]);