(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["makeOrder"],{"076e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-tabbar",{staticClass:"van-tabbar-box",attrs:{route:"",value:t.active,fixed:!1,"active-color":"#fbbb5f","inactive-color":"#cecfd8"}},[a("van-tabbar-item",{attrs:{icon:"home-o",name:"首页",to:"/"}},[t._v("首页")]),a("van-tabbar-item",{attrs:{icon:"apps-o",name:"分类",to:"/classification/6"}},[t._v("分类")]),a("van-tabbar-item",{attrs:{icon:"shopping-cart-o",name:"购物车",to:"/shopcat"}},[t._v("购物车")]),a("van-tabbar-item",{attrs:{icon:"contact",name:"我的"},on:{click:t.toMeBtn}},[t._v("我的")])],1)},o=[],r={data:function(){return{}},props:{active:{}},methods:{toMeBtn:function(){window.location.href="/#/me"}}},i=r,s=(a("f187"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},"0cbb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-popup",{staticClass:"scgood-plu-01",attrs:{value:t.showpop,"overlay-style":{background:"rgba(0,0,0,0)"}},on:{"click-overlay":t.clickoverlay}},[a("ul",[a("li",{on:{click:function(e){return t.gohref(1)}}},[a("van-icon",{attrs:{name:"home-o"}}),a("span",[t._v("首页")])],1),a("li",{on:{click:function(e){return t.gohref(2)}}},[a("van-icon",{attrs:{name:"shopping-cart-o"}}),a("span",[t._v("购物车")])],1),a("li",{on:{click:function(e){return t.gohref(3)}}},[a("van-icon",{attrs:{name:"apps-o"}}),a("span",[t._v("分类搜索")])],1),a("li",{on:{click:function(e){return t.gohref(4)}}},[a("van-icon",{attrs:{name:"contact"}}),a("span",[t._v("我的")])],1)])])},o=[],r=(a("ac1f"),a("5319"),{data:function(){return{}},props:{showpop:{}},mounted:function(){},methods:{gohref:function(t){1===t?this.$router.replace({name:"index2"}):2===t?this.$router.replace({name:"shopcat"}):3===t?this.$router.replace({name:"classification",params:{type:1}}):4===t&&(window.location.href="/#/me")},clickoverlay:function(){this.$emit("update:showpop",!1)}}}),i=r,s=a("2877"),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},"159b":function(t,e,a){var n=a("da84"),o=a("fdbc"),r=a("17c2"),i=a("9112");for(var s in o){var c=n[s],d=c&&c.prototype;if(d&&d.forEach!==r)try{i(d,"forEach",r)}catch(u){d.forEach=r}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,o=a("a640"),r=a("ae40"),i=o("forEach"),s=r("forEach");t.exports=i&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1d8f":function(t,e,a){},"3e85":function(t,e,a){"use strict";var n=a("1d8f"),o=a.n(n);o.a},4160:function(t,e,a){"use strict";var n=a("23e7"),o=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"4de4":function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").filter,r=a("1dde"),i=a("ae40"),s=r("filter"),c=i("filter");n({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,a){"use strict";var n=a("d784"),o=a("825a"),r=a("7b0b"),i=a("50c4"),s=a("a691"),c=a("1d80"),d=a("8aa5"),u=a("14c3"),l=Math.max,p=Math.min,f=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,a,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=n.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(a,n){var o=c(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,o,n):e.call(String(o),a,n)},function(t,n){if(!m&&g||"string"===typeof n&&-1===n.indexOf(y)){var r=a(e,t,this,n);if(r.done)return r.value}var c=o(t),f=String(this),h="function"===typeof n;h||(n=String(n));var v=c.global;if(v){var w=c.unicode;c.lastIndex=0}var k=[];while(1){var C=u(c,f);if(null===C)break;if(k.push(C),!v)break;var E=String(C[0]);""===E&&(c.lastIndex=d(f,i(c.lastIndex),w))}for(var x="",O=0,S=0;S<k.length;S++){C=k[S];for(var A=String(C[0]),j=l(p(s(C.index),f.length),0),I=[],$=1;$<C.length;$++)I.push(b(C[$]));var P=C.groups;if(h){var N=[A].concat(I,j,f);void 0!==P&&N.push(P);var L=String(n.apply(void 0,N))}else L=_(A,f,j,I,P,n);j>=O&&(x+=f.slice(O,j)+L,O=j+A.length)}return x+f.slice(O)}];function _(t,a,n,o,i,s){var c=n+t.length,d=o.length,u=v;return void 0!==i&&(i=r(i),u=h),e.call(s,u,(function(e,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,n);case"'":return a.slice(c);case"<":s=i[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>d){var l=f(u/10);return 0===l?e:l<=d?void 0===o[l-1]?r.charAt(1):o[l-1]+r.charAt(1):e}s=o[u-1]}return void 0===s?"":s}))}}))},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),o=a("5899"),r="["+o+"]",i=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var n=a("861d"),o=a("d2bb");t.exports=function(t,e,a){var r,i;return o&&"function"==typeof(r=e.constructor)&&r!==a&&n(i=r.prototype)&&i!==a.prototype&&o(t,i),t}},a15b:function(t,e,a){"use strict";var n=a("23e7"),o=a("44ad"),r=a("fc6a"),i=a("a640"),s=[].join,c=o!=Object,d=i("join",",");n({target:"Array",proto:!0,forced:c||!d},{join:function(t){return s.call(r(this),void 0===t?",":t)}})},a9e3:function(t,e,a){"use strict";var n=a("83ab"),o=a("da84"),r=a("94ca"),i=a("6eeb"),s=a("5135"),c=a("c6b6"),d=a("7156"),u=a("c04e"),l=a("d039"),p=a("7c73"),f=a("241c").f,h=a("06cf").f,v=a("9bf2").f,b=a("58a8").trim,m="Number",g=o[m],y=g.prototype,_=c(p(y))==m,w=function(t){var e,a,n,o,r,i,s,c,d=u(t,!1);if("string"==typeof d&&d.length>2)if(d=b(d),e=d.charCodeAt(0),43===e||45===e){if(a=d.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+d}for(r=d.slice(2),i=r.length,s=0;s<i;s++)if(c=r.charCodeAt(s),c<48||c>o)return NaN;return parseInt(r,n)}return+d};if(r(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var k,C=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof C&&(_?l((function(){y.valueOf.call(a)})):c(a)!=m)?d(new g(w(e)),a,C):w(e)},E=n?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;E.length>x;x++)s(g,k=E[x])&&!s(C,k)&&v(C,k,h(g,k));C.prototype=y,y.constructor=C,i(o,m,C)}},b64b:function(t,e,a){var n=a("23e7"),o=a("7b0b"),r=a("df75"),i=a("d039"),s=i((function(){r(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(t){return r(o(t))}})},bf9e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-dx-shoporder"},[a("van-nav-bar",{staticClass:"fbpl",attrs:{title:"确认订单","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"weapp-nav",size:"18"}})]},proxy:!0}])}),a("div",{staticStyle:{height:"1.12rem"}}),a("div",{staticClass:"shopcat-address"},[a("van-cell",{staticClass:"sad",attrs:{icon:t.addressli.icon,"is-link":""},on:{click:t.shopcatadscl},scopedSlots:t._u([{key:"title",fn:function(){return[t.addressli.province_id?a("div",[a("p",[t._v(t._s(t.addressli.name)+" "+t._s(t.addressli.mobile))]),a("p",[t._v(t._s(t.addressli.province)+" "+t._s(t.addressli.market)+" "+t._s(t.addressli.area))]),a("p",[t._v(t._s(t.addressli.address))])]):a("div",[t._v("手动添加收货地址")])]},proxy:!0}])})],1),a("ul",{staticClass:"shopcat-box"},[a("li",[a("div",{staticClass:"img",style:{backgroundImage:"url("+t.list.cover_img+")"}}),a("div",{staticClass:"con"},[a("div",{staticClass:"tit"},[t._v(t._s(t.list.title))])]),a("div",{staticClass:"num"},[t._v("x"+t._s(t.list.num))])])]),a("div",{staticStyle:{"margin-top":"12px"}}),a("van-coupon-cell",{staticClass:"yhj01",attrs:{coupons:t.list.coupon,"chosen-coupon":t.chosenCoupon,border:!1},on:{click:function(e){t.showList=!0}}}),a("van-popup",{staticClass:"yhj0101-plu",attrs:{round:"","get-container":"body",position:"bottom"},model:{value:t.showList,callback:function(e){t.showList=e},expression:"showList"}},[a("van-coupon-list",{attrs:{"show-count":!1,"show-exchange-bar":!1,coupons:t.list.coupon,"chosen-coupon":t.chosenCoupon},on:{change:t.onChangeyhj}})],1),a("div",{staticClass:"zffs01"},[a("van-radio-group",{model:{value:t.radiopay,callback:function(e){t.radiopay=e},expression:"radiopay"}},[a("van-cell-group",t._l(t.actionsPay,(function(e,n){return a("van-cell",{key:n,class:"p-"+e.icon,attrs:{title:e.name,clickable:"",icon:e.icon},on:{click:function(a){t.radiopay=e.id}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{name:e.id}})]},proxy:!0}],null,!0)})})),1)],1)],1),a("van-submit-bar",{attrs:{price:t.price,"button-text":"提交订单",disabled:!t.radiopay||!t.address_id},on:{submit:t.onmakePay}}),a("tx-add-panel",{attrs:{panelShow:t.panelShow,addpop:t.addressli,is_edit:t.is_edit},on:{"update:panelShow":function(e){t.panelShow=e},"update:panel-show":function(e){t.panelShow=e},address_pop_fn:t.address_pop_fn}}),a("more-btn",{attrs:{showpop:t.showpop},on:{"update:showpop":function(e){t.showpop=e}}})],1)},o=[],r=(a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("5319"),a("ddb0"),a("5530")),i=a("3835"),s=a("076e"),c=a("bcad"),d=a("0cbb"),u=a("4328"),l=a.n(u),p=a("a813"),f=a("be3b"),h=a("8add"),v={data:function(){return{showpop:!1,team_id:this.$route.query.team_id,yhj01:"有可用优惠卷",chosenCoupon:-1,chosenCouponVal:0,chosenCouponValId:0,showList:!1,coupons:[],actionsPay:[{id:2,name:"支付宝",icon:"alipay"},{id:3,name:"余额支付",icon:"gold-coin"}],paymentShow:!1,selpaytext:"请选择支付方式",selpayid:2,address_id:0,radiopay:2,price:0,total:0,list:{},addressArr:[],addressli:{icon:"add-square",icon1:"location",id:"",mobile:"",province:"",province_id:0,market:"",market_id:0,area:"",area_id:0,address:""},panelShow:!1,addpop:{},is_edit:!0}},props:{active:{type:Number,default:0}},components:{Footer:s["a"],txAddPanel:c["a"],moreBtn:d["a"]},mounted:function(){this.firstAPI()},methods:{onClickLeft:function(){"addresses"===this.$route.params.ref_page?this.$router.go(-2):this.$router.go(-1)},onClickRight:function(){this.showpop=!this.showpop},shopcatadscl:function(){this.addressli.province_id&&this.addressArr.length>0?this.$router.push({path:"/addresses",query:{ref_page:"shoporder",address_id:this.addressli.id,shopping_id:this.shopping_id}}):(this.panelShow=!this.panelShow,this.is_edit=!1)},address_pop_fn:function(t,e){var a=this;a.addressli.icon="location",a.addressli=Object.assign({},a.addressli,t),a.address_id=t.id},onSelPay:function(t,e){this.paymentShow=!this.paymentShow,this.selpayid=t.id,this.selpaytext=t.name},onChangeyhj:function(t){this.showList=!1,this.chosenCoupon=t,console.log(t),t>-1?(this.chosenCouponVal=this.list.coupon[t].money,this.chosenCouponValId=this.list.coupon[t].id,this.price=100*(this.price/100-this.chosenCouponVal)):(this.price=this.total,this.chosenCouponValId=0)},specv:function(t){var e=p["c"],a=[];return Object.keys(t).map((function(n,o){e.includes(n)||a.push(t[n])})),a.join()},firstAPI:function(){var t=this,e=t.$toast.loading({duration:0,forbidClick:!0});Promise.all([f["a"].post("".concat(p["b"],"/team/detail"),l.a.stringify({team_id:t.team_id})),f["a"].post("".concat(p["b"],"/address"))]).then((function(a){e.clear();var n=Object(i["a"])(a,2),o=n[0],s=n[1],c=o.data,d=s.data;if(1===c.status){var u=Object(r["a"])({},c.info);u.coupon.map((function(t){t.value=100*t.money,t.startAt="",t.endAt="",t.valueDesc=t.money,t.condition="满减条件",t.unitDesc="元",t.name=""})),t.price=100*u.group_price,t.list=u}else 2===c.status?t.$router.replace({name:"orders",params:{type:2}}):t.$toast("".concat(c.message));1===d.status?(t.addressArr=Array.isArray(d.info)?d.info:[],h["b"].setAddressListAction(d.info)):console.log(d.message)}))},onmakePay:function(){var t=this,e=t.$toast.loading({duration:0,forbidClick:!0});f["a"].post("".concat(p["b"],"/team/pay"),l.a.stringify({order_id:t.list.order_id,address_id:t.address_id,coupon_id:t.chosenCouponValId,pay_type:3===t.radiopay?2:1})).then((function(a){var n=a.data,o=n.status,r=n.message,i=n.info;1===o?1===i.has_pay?window.location.href=i.direct_url:0===i.has_pay&&(t.$toast("".concat(r)),t.$router.replace({name:"orders",params:{type:3}})):(e.clear(),t.$toast("".concat(r)))}))}}},b=v,m=(a("3e85"),a("2877")),g=Object(m["a"])(b,n,o,!1,null,null,null);e["default"]=g.exports},d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,r=a("1dde"),i=a("ae40"),s=r("map"),c=i("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,a){var n=a("23e7"),o=a("83ab"),r=a("56ef"),i=a("fc6a"),s=a("06cf"),c=a("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,a,n=i(t),o=s.f,d=r(n),u={},l=0;while(d.length>l)a=o(n,e=d[l++]),void 0!==a&&c(u,e,a);return u}})},df2e:function(t,e,a){},e439:function(t,e,a){var n=a("23e7"),o=a("d039"),r=a("fc6a"),i=a("06cf").f,s=a("83ab"),c=o((function(){i(1)})),d=!s||c;n({target:"Object",stat:!0,forced:d,sham:!s},{getOwnPropertyDescriptor:function(t,e){return i(r(t),e)}})},f187:function(t,e,a){"use strict";var n=a("df2e"),o=a.n(n);o.a}}]);