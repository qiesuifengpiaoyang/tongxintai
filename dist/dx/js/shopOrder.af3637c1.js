(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shopOrder"],{"076e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-tabbar",{attrs:{route:"",value:t.active,"active-color":"#e02e24","inactive-color":"#000"}},[a("van-tabbar-item",{attrs:{icon:"home-o",name:"首页",to:"/"}},[t._v("首页")]),a("van-tabbar-item",{attrs:{icon:"apps-o",name:"分类",to:"/classification/1"}},[t._v("分类")]),a("van-tabbar-item",{attrs:{icon:"shopping-cart-o",name:"购物车",to:"/shopcat"}},[t._v("购物车")]),a("van-tabbar-item",{attrs:{icon:"contact",name:"个人中心",to:"/personal"}},[t._v("个人中心")]),a("van-tabbar-item",{attrs:{icon:"home-o"},on:{click:t.fh}},[t._v("同心台")])],1)},o=[],i={data:function(){return{}},props:{active:{}},methods:{fh:function(){console.log("返回同心台"),window.location.href="/#/"}}},r=i,s=a("2877"),c=Object(s["a"])(r,n,o,!1,null,null,null);e["a"]=c.exports},"0cbb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-popup",{staticClass:"scgood-plu-01",attrs:{value:t.showpop,"overlay-style":{background:"rgba(0,0,0,0)"}},on:{"click-overlay":t.clickoverlay}},[a("ul",[a("li",{on:{click:function(e){return t.gohref(1)}}},[a("van-icon",{attrs:{name:"home-o"}}),a("span",[t._v("首页")])],1),a("li",{on:{click:function(e){return t.gohref(2)}}},[a("van-icon",{attrs:{name:"shopping-cart-o"}}),a("span",[t._v("购物车")])],1),a("li",{on:{click:function(e){return t.gohref(3)}}},[a("van-icon",{attrs:{name:"apps-o"}}),a("span",[t._v("分类搜索")])],1),a("li",{on:{click:function(e){return t.gohref(4)}}},[a("van-icon",{attrs:{name:"contact"}}),a("span",[t._v("个人中心")])],1)])])},o=[],i=(a("ac1f"),a("5319"),{data:function(){return{}},props:{showpop:{}},mounted:function(){},methods:{gohref:function(t){1===t?this.$router.replace({name:"index2"}):2===t?this.$router.replace({name:"shopcat"}):3===t?this.$router.replace({name:"classification",params:{type:1}}):4===t&&this.$router.replace({name:"personal"})},clickoverlay:function(){this.$emit("update:showpop",!1)}}}),r=i,s=a("2877"),c=Object(s["a"])(r,n,o,!1,null,null,null);e["a"]=c.exports},"159b":function(t,e,a){var n=a("da84"),o=a("fdbc"),i=a("17c2"),r=a("9112");for(var s in o){var c=n[s],d=c&&c.prototype;if(d&&d.forEach!==i)try{r(d,"forEach",i)}catch(p){d.forEach=i}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,o=a("a640"),i=a("ae40"),r=o("forEach"),s=i("forEach");t.exports=r&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var n=a("23e7"),o=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"4de4":function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").filter,i=a("1dde"),r=a("ae40"),s=i("filter"),c=r("filter");n({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,a){"use strict";var n=a("d784"),o=a("825a"),i=a("7b0b"),r=a("50c4"),s=a("a691"),c=a("1d80"),d=a("8aa5"),p=a("14c3"),u=Math.max,l=Math.min,f=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,a,n){var b=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=n.REPLACE_KEEPS_$0,g=b?"$":"$0";return[function(a,n){var o=c(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,o,n):e.call(String(o),a,n)},function(t,n){if(!b&&y||"string"===typeof n&&-1===n.indexOf(g)){var i=a(e,t,this,n);if(i.done)return i.value}var c=o(t),f=String(this),h="function"===typeof n;h||(n=String(n));var v=c.global;if(v){var w=c.unicode;c.lastIndex=0}var O=[];while(1){var S=p(c,f);if(null===S)break;if(O.push(S),!v)break;var j=String(S[0]);""===j&&(c.lastIndex=d(f,r(c.lastIndex),w))}for(var C="",$=0,k=0;k<O.length;k++){S=O[k];for(var E=String(S[0]),I=u(l(s(S.index),f.length),0),x=[],A=1;A<S.length;A++)x.push(m(S[A]));var P=S.groups;if(h){var N=[E].concat(x,I,f);void 0!==P&&N.push(P);var L=String(n.apply(void 0,N))}else L=_(E,f,I,x,P,n);I>=$&&(C+=f.slice($,I)+L,$=I+E.length)}return C+f.slice($)}];function _(t,a,n,o,r,s){var c=n+t.length,d=o.length,p=v;return void 0!==r&&(r=i(r),p=h),e.call(s,p,(function(e,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,n);case"'":return a.slice(c);case"<":s=r[i.slice(1,-1)];break;default:var p=+i;if(0===p)return e;if(p>d){var u=f(p/10);return 0===u?e:u<=d?void 0===o[u-1]?i.charAt(1):o[u-1]+i.charAt(1):e}s=o[p-1]}return void 0===s?"":s}))}}))},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},5533:function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),o=a("5899"),i="["+o+"]",r=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var n=a("861d"),o=a("d2bb");t.exports=function(t,e,a){var i,r;return o&&"function"==typeof(i=e.constructor)&&i!==a&&n(r=i.prototype)&&r!==a.prototype&&o(t,r),t}},a15b:function(t,e,a){"use strict";var n=a("23e7"),o=a("44ad"),i=a("fc6a"),r=a("a640"),s=[].join,c=o!=Object,d=r("join",",");n({target:"Array",proto:!0,forced:c||!d},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},a9e3:function(t,e,a){"use strict";var n=a("83ab"),o=a("da84"),i=a("94ca"),r=a("6eeb"),s=a("5135"),c=a("c6b6"),d=a("7156"),p=a("c04e"),u=a("d039"),l=a("7c73"),f=a("241c").f,h=a("06cf").f,v=a("9bf2").f,m=a("58a8").trim,b="Number",y=o[b],g=y.prototype,_=c(l(g))==b,w=function(t){var e,a,n,o,i,r,s,c,d=p(t,!1);if("string"==typeof d&&d.length>2)if(d=m(d),e=d.charCodeAt(0),43===e||45===e){if(a=d.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+d}for(i=d.slice(2),r=i.length,s=0;s<r;s++)if(c=i.charCodeAt(s),c<48||c>o)return NaN;return parseInt(i,n)}return+d};if(i(b,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var O,S=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof S&&(_?u((function(){g.valueOf.call(a)})):c(a)!=b)?d(new y(w(e)),a,S):w(e)},j=n?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;j.length>C;C++)s(y,O=j[C])&&!s(S,O)&&v(S,O,h(y,O));S.prototype=g,g.constructor=S,r(o,b,S)}},b345:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-dx-shoporder"},[a("van-nav-bar",{staticClass:"fbpl",attrs:{title:"确认订单","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"weapp-nav",size:"18"}})]},proxy:!0}])}),a("div",{staticStyle:{height:"1.12rem"}}),a("div",{staticClass:"shopcat-address"},[a("van-cell",{staticClass:"sad",attrs:{icon:t.addressli.icon,"is-link":""},on:{click:t.shopcatadscl},scopedSlots:t._u([{key:"title",fn:function(){return[t.addressli.province_id?a("div",[a("p",[t._v(t._s(t.addressli.name)+" "+t._s(t.addressli.mobile))]),a("p",[t._v(" "+t._s(t.addressli.province)+" "+t._s(t.addressli.market)+" "+t._s(t.addressli.area)+" ")]),a("p",[t._v(t._s(t.addressli.address))])]):a("div",[t._v("手动添加收货地址")])]},proxy:!0}])})],1),a("ul",{staticClass:"shopcat-box"},t._l(t.list.shopping,(function(e,n){return a("li",{key:n},[a("div",{staticClass:"img",style:{backgroundImage:"url("+e.cover_img+")"}}),a("div",{staticClass:"con"},[a("div",{staticClass:"tit"},[t._v(t._s(e.title))]),a("div",{staticClass:"cfig"},[t._v(t._s(t.specv(e.spec)))])]),a("div",{staticClass:"num"},[t._v("x"+t._s(e.num))])])})),0),a("div",{staticStyle:{"margin-top":"12px"}}),a("div",{staticClass:"postage"},[a("span",[t._v("邮费")]),a("span",[t._v(t._s(0===t.youfei?"包邮":t.youfei+"元"))])]),t.showHidden?a("div",[a("van-coupon-cell",{staticClass:"yhj01",attrs:{coupons:t.list.coupon,"chosen-coupon":t.chosenCoupon,border:!1},on:{click:function(e){t.showList=!0}}}),a("van-popup",{staticClass:"yhj0101-plu",attrs:{round:"","get-container":"body",position:"bottom"},model:{value:t.showList,callback:function(e){t.showList=e},expression:"showList"}},[a("van-coupon-list",{attrs:{"show-count":!1,"show-exchange-bar":!1,coupons:t.list.coupon,"chosen-coupon":t.chosenCoupon},on:{change:t.onChangeyhj}})],1),a("div",{staticClass:"zffs01"},[a("van-radio-group",{model:{value:t.radiopay,callback:function(e){t.radiopay=e},expression:"radiopay"}},[a("van-cell-group",t._l(t.actionsPay,(function(e,n){return a("van-cell",{key:n,class:"p-"+e.icon,attrs:{title:e.name,clickable:"",icon:e.icon},on:{click:function(a){t.radiopay=e.id}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{name:e.id}})]},proxy:!0}],null,!0)})})),1)],1)],1)],1):t._e(),a("van-submit-bar",{attrs:{price:t.price,"button-text":"提交订单",disabled:!t.radiopay||!t.address_id},on:{submit:t.onSubPay}}),a("tx-add-panel",{attrs:{panelShow:t.panelShow,addpop:t.addressli,is_edit:t.is_edit},on:{"update:panelShow":function(e){t.panelShow=e},"update:panel-show":function(e){t.panelShow=e},address_pop_fn:t.address_pop_fn}}),a("more-btn",{attrs:{showpop:t.showpop},on:{"update:showpop":function(e){t.showpop=e}}})],1)},o=[],i=(a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("5319"),a("ddb0"),a("b85c")),r=a("3835"),s=a("5530"),c=a("076e"),d=a("bcad"),p=a("0cbb"),u=a("4328"),l=a.n(u),f=a("a813"),h=a("be3b"),v=a("8add"),m={data:function(){return{youfei:0,showpop:!1,shopping_id:this.$route.params.shopping_id,type:this.$route.params.type,num:this.$route.params.shopping_id,commodity_id:this.$route.params.ref_page,specification:this.$route.params.address_id,showHidden:!0,address_id:this.$route.params.address_id||0,yhj01:"有可用优惠卷",chosenCoupon:-1,chosenCouponVal:0,chosenCouponValId:0,showList:!1,coupons:[],actionsPay:[{id:1,name:"支付宝",icon:"alipay"},{id:2,name:"余额支付",icon:"gold-coin"},{id:3,name:"微信",icon:"wechat"},{id:4,name:"换购积分",icon:"gem-o"}],paymentShow:!1,selpaytext:"请选择支付方式",selpayid:2,radiopay:1,price:0,total:0,list:{},addressli:{icon:"add-square",icon1:"location",id:"",mobile:"",province:"",province_id:0,market:"",market_id:0,area:"",area_id:0,address:""},panelShow:!1,addpop:{},is_edit:!0}},props:{active:{type:Number,default:0}},components:{Footer:c["a"],txAddPanel:d["a"],moreBtn:p["a"]},destroyed:function(){window.sessionStorage.removeItem("ztm")},created:function(){var t=this;console.log("4-2修改确定"),6==this.type&&(this.showHidden=!this.showHidden),h["a"].post("".concat(f["b"],"/address")).then((function(e){var a=e.data;1===a.status?v["b"].setAddressListAction(a.info):t.$toast("".concat(a.message)),t.postConfirmOrderPage()}))},mounted:function(){},watch:{panelShow:{handler:function(){this.panelShow||this.postConfirmOrderPage()},deep:!0}},methods:{postConfirmOrderPage:function(){var t=this,e=Object.create(null);e=6==this.type?{commodity_id:this.commodity_id,num:this.num,spec:this.specification}:this.commodity_id?{commodity_id:this.commodity_id}:/^[0-9]+.?[0-9]*$/.test(this.addressli.id)?{shopping_id:this.shopping_id,address_id:parseInt(this.addressli.id)}:{shopping_id:this.shopping_id},h["a"].post("".concat(f["b"],"/confirmOrderPage"),l.a.stringify(e)).then((function(e){var a=e.data;if(1==a.status){Object(s["a"])({},a.info);if(1===a.status){var n,o=Object(s["a"])({},a.info);o.coupon.map((function(t){t.value=100*t.money,t.startAt="",t.endAt="",t.valueDesc=t.money,t.condition="满减条件",t.unitDesc="元",t.name=""})),t.price=100*o.total,t.total=100*o.total,n=t.$route.params.address_id&&6!=t.type?Object(s["a"])({},JSON.parse(sessionStorage.getItem("addrep"))):Object(s["a"])({},o.address),o.address.province_id&&(n.icon="location"),t.address_id=n.id,t.addressli=Object.assign({},t.addressli,n),t.list=o}else 2===a.status?t.$router.replace({name:"orders",params:{type:2}}):t.$toast("".concat(a.message))}else t.$toast("".concat(a.message))}))},onClickLeft:function(){"addresses"===this.$route.params.ref_page&&6!=this.type?this.$router.go(-2):this.$router.go(-1)},onClickRight:function(){this.showpop=!this.showpop},shopcatadscl:function(){this.onChangeyhj(-1),this.addressli.province_id?this.$router.push({path:"/addresses",query:{ref_page:"shoporder",address_id:this.addressli.id,shopping_id:this.shopping_id}}):(this.panelShow=!this.panelShow,this.is_edit=!1)},address_pop_fn:function(t,e){var a=this;a.addressli.icon="location",a.addressli=Object.assign({},a.addressli,t)},onSelPay:function(t,e){this.paymentShow=!this.paymentShow,this.selpayid=t.id,this.selpaytext=t.name},onChangeyhj:function(t){if(this.showList=!1,this.chosenCoupon=t,t>-1){this.chosenCouponVal=this.list.coupon[t].money,this.chosenCouponValId=this.list.coupon[t].id;var e=0;e=100*(this.total/100-this.chosenCouponVal),this.price=e<=0?0:e}else this.price=this.total,this.chosenCouponValId=0},specv:function(t){var e=f["c"],a=[];return Object.keys(t).map((function(n,o){e.includes(n)||a.push(t[n])})),a.join()},firstAPI:function(){var t=this,e=this;Promise.all([h["a"].post("".concat(f["b"],"/confirmOrderPage"),l.a.stringify({shopping_id:e.shopping_id})),h["a"].post("".concat(f["b"],"/address"))]).then((function(a){var n,o=Object(r["a"])(a,2),c=o[0],d=o[1],p=c.data,u=d.data,l=Object(s["a"])({},p.info),f=Object(i["a"])(l.shopping);try{for(f.s();!(n=f.n()).done;){var h=n.value;t.youfei=h.freight}}catch(y){f.e(y)}finally{f.f()}if(1===p.status){var m,b=Object(s["a"])({},p.info);b.coupon.map((function(t){t.value=100*t.money,t.startAt="",t.endAt="",t.valueDesc=t.money,t.condition="满减条件",t.unitDesc="元",t.name=""})),e.price=100*b.total,e.total=100*b.total,m=e.$route.params.address_id?Object(s["a"])({},JSON.parse(sessionStorage.getItem("addrep"))):Object(s["a"])({},b.address),b.address.province_id&&(m.icon="location"),e.address_id=m.id,e.addressli=Object.assign({},e.addressli,m),e.list=b}else 2===p.status?e.$router.replace({name:"orders",params:{type:2}}):e.$toast("".concat(p.message));1===u.status?v["b"].setAddressListAction(u.info):console.log(u.message)}))},onSubPay:function(){var t=this,e=t.$toast.loading({duration:0,forbidClick:!0}),a={};a=6==this.type?{commodity_id:t.commodity_id,address_id:t.address_id,num:t.num,spec:t.specification,pay_type:4}:{shopping_id:t.shopping_id,address_id:t.address_id,coupon_id:t.chosenCouponValId,pay_type:t.radiopay},h["a"].post("".concat(f["b"],"/addOrder"),l.a.stringify(a)).then((function(a){var n=a.data,o=n.status,i=n.message,r=n.info;1===o?1===r.has_pay?window.location.href=r.direct_url:0===r.has_pay&&(t.$toast("".concat(i)),t.$router.replace({name:"orders",params:{type:3}})):(e.clear(),t.$toast("".concat(i)))}))},onmakePay:function(){var t=this;h["a"].post("".concat(f["b"],"/team/pay"),l.a.stringify({shopping_id:t.shopping_id,address_id:t.address_id,coupon_id:t.chosenCouponValId,pay_type:3===t.radiopay?2:1})).then((function(e){var a=e.data,n=a.status,o=a.message,i=a.info;1===n?1===i.has_pay?window.location.href=i.direct_url:0===i.has_pay&&(t.$toast("".concat(o)),t.$router.replace({name:"orders",params:{type:3}})):t.$toast("".concat(o))}))}}},b=m,y=(a("d71b"),a("2877")),g=Object(y["a"])(b,n,o,!1,null,null,null);e["default"]=g.exports},b64b:function(t,e,a){var n=a("23e7"),o=a("7b0b"),i=a("df75"),r=a("d039"),s=r((function(){i(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(t){return i(o(t))}})},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");var n=a("06c5");function o(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){c=!0,r=t},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(c)throw r}}}}},d71b:function(t,e,a){"use strict";var n=a("5533"),o=a.n(n);o.a},d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,i=a("1dde"),r=a("ae40"),s=i("map"),c=r("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,a){var n=a("23e7"),o=a("83ab"),i=a("56ef"),r=a("fc6a"),s=a("06cf"),c=a("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,a,n=r(t),o=s.f,d=i(n),p={},u=0;while(d.length>u)a=o(n,e=d[u++]),void 0!==a&&c(p,e,a);return p}})},e439:function(t,e,a){var n=a("23e7"),o=a("d039"),i=a("fc6a"),r=a("06cf").f,s=a("83ab"),c=o((function(){r(1)})),d=!s||c;n({target:"Object",stat:!0,forced:d,sham:!s},{getOwnPropertyDescriptor:function(t,e){return r(i(t),e)}})}}]);