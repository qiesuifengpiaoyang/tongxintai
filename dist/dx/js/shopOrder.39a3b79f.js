(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shopOrder"],{"076e":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-tabbar",{staticClass:"van-tabbar-box",attrs:{route:"",value:t.active,fixed:!1,"active-color":"#fbbb5f","inactive-color":"#cecfd8"}},[a("van-tabbar-item",{attrs:{icon:"home-o",name:"首页",to:"/"}},[t._v("首页")]),a("van-tabbar-item",{attrs:{icon:"apps-o",name:"分类",to:"/classification/6"}},[t._v("分类")]),a("van-tabbar-item",{attrs:{icon:"shopping-cart-o",name:"购物车",to:"/shopcat"}},[t._v("购物车")]),a("van-tabbar-item",{attrs:{icon:"contact",name:"我的"},on:{click:t.toMeBtn}},[t._v("我的")])],1)},n=[],i={data:function(){return{}},props:{active:{}},methods:{toMeBtn:function(){window.location.href="/#/me"}}},s=i,r=(a("f187"),a("2877")),c=Object(r["a"])(s,o,n,!1,null,null,null);e["a"]=c.exports},"0cbb":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-popup",{staticClass:"scgood-plu-01",attrs:{value:t.showpop,"overlay-style":{background:"rgba(0,0,0,0)"}},on:{"click-overlay":t.clickoverlay}},[a("ul",[a("li",{on:{click:function(e){return t.gohref(1)}}},[a("van-icon",{attrs:{name:"home-o"}}),a("span",[t._v("首页")])],1),a("li",{on:{click:function(e){return t.gohref(2)}}},[a("van-icon",{attrs:{name:"shopping-cart-o"}}),a("span",[t._v("购物车")])],1),a("li",{on:{click:function(e){return t.gohref(3)}}},[a("van-icon",{attrs:{name:"apps-o"}}),a("span",[t._v("分类搜索")])],1),a("li",{on:{click:function(e){return t.gohref(4)}}},[a("van-icon",{attrs:{name:"contact"}}),a("span",[t._v("我的")])],1)])])},n=[],i=(a("ac1f"),a("5319"),{data:function(){return{}},props:{showpop:{}},mounted:function(){},methods:{gohref:function(t){1===t?this.$router.replace({name:"index2"}):2===t?this.$router.replace({name:"shopcat"}):3===t?this.$router.replace({name:"classification",params:{type:1}}):4===t&&(window.location.href="/#/me")},clickoverlay:function(){this.$emit("update:showpop",!1)}}}),s=i,r=a("2877"),c=Object(r["a"])(s,o,n,!1,null,null,null);e["a"]=c.exports},"159b":function(t,e,a){var o=a("da84"),n=a("fdbc"),i=a("17c2"),s=a("9112");for(var r in n){var c=o[r],d=c&&c.prototype;if(d&&d.forEach!==i)try{s(d,"forEach",i)}catch(p){d.forEach=i}}},"17c2":function(t,e,a){"use strict";var o=a("b727").forEach,n=a("a640"),i=a("ae40"),s=n("forEach"),r=i("forEach");t.exports=s&&r?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var o=a("23e7"),n=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4de4":function(t,e,a){"use strict";var o=a("23e7"),n=a("b727").filter,i=a("1dde"),s=a("ae40"),r=i("filter"),c=s("filter");o({target:"Array",proto:!0,forced:!r||!c},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,a){"use strict";var o=a("d784"),n=a("825a"),i=a("7b0b"),s=a("50c4"),r=a("a691"),c=a("1d80"),d=a("8aa5"),p=a("14c3"),u=Math.max,l=Math.min,f=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};o("replace",2,(function(t,e,a,o){var g=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=o.REPLACE_KEEPS_$0,y=g?"$":"$0";return[function(a,o){var n=c(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,o):e.call(String(n),a,o)},function(t,o){if(!g&&b||"string"===typeof o&&-1===o.indexOf(y)){var i=a(e,t,this,o);if(i.done)return i.value}var c=n(t),f=String(this),h="function"===typeof o;h||(o=String(o));var v=c.global;if(v){var w=c.unicode;c.lastIndex=0}var O=[];while(1){var $=p(c,f);if(null===$)break;if(O.push($),!v)break;var S=String($[0]);""===S&&(c.lastIndex=d(f,s(c.lastIndex),w))}for(var C="",j=0,k=0;k<O.length;k++){$=O[k];for(var E=String($[0]),x=u(l(r($.index),f.length),0),I=[],P=1;P<$.length;P++)I.push(m($[P]));var A=$.groups;if(h){var N=[E].concat(I,x,f);void 0!==A&&N.push(A);var L=String(o.apply(void 0,N))}else L=_(E,f,x,I,A,o);x>=j&&(C+=f.slice(j,x)+L,j=x+E.length)}return C+f.slice(j)}];function _(t,a,o,n,s,r){var c=o+t.length,d=n.length,p=v;return void 0!==s&&(s=i(s),p=h),e.call(r,p,(function(e,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,o);case"'":return a.slice(c);case"<":r=s[i.slice(1,-1)];break;default:var p=+i;if(0===p)return e;if(p>d){var u=f(p/10);return 0===u?e:u<=d?void 0===n[u-1]?i.charAt(1):n[u-1]+i.charAt(1):e}r=n[p-1]}return void 0===r?"":r}))}}))},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},5533:function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var o=a("1d80"),n=a("5899"),i="["+n+"]",s=RegExp("^"+i+i+"*"),r=RegExp(i+i+"*$"),c=function(t){return function(e){var a=String(o(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(r,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var o=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var i,s;return n&&"function"==typeof(i=e.constructor)&&i!==a&&o(s=i.prototype)&&s!==a.prototype&&n(t,s),t}},a15b:function(t,e,a){"use strict";var o=a("23e7"),n=a("44ad"),i=a("fc6a"),s=a("a640"),r=[].join,c=n!=Object,d=s("join",",");o({target:"Array",proto:!0,forced:c||!d},{join:function(t){return r.call(i(this),void 0===t?",":t)}})},a9e3:function(t,e,a){"use strict";var o=a("83ab"),n=a("da84"),i=a("94ca"),s=a("6eeb"),r=a("5135"),c=a("c6b6"),d=a("7156"),p=a("c04e"),u=a("d039"),l=a("7c73"),f=a("241c").f,h=a("06cf").f,v=a("9bf2").f,m=a("58a8").trim,g="Number",b=n[g],y=b.prototype,_=c(l(y))==g,w=function(t){var e,a,o,n,i,s,r,c,d=p(t,!1);if("string"==typeof d&&d.length>2)if(d=m(d),e=d.charCodeAt(0),43===e||45===e){if(a=d.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+d}for(i=d.slice(2),s=i.length,r=0;r<s;r++)if(c=i.charCodeAt(r),c<48||c>n)return NaN;return parseInt(i,o)}return+d};if(i(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var O,$=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof $&&(_?u((function(){y.valueOf.call(a)})):c(a)!=g)?d(new b(w(e)),a,$):w(e)},S=o?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;S.length>C;C++)r(b,O=S[C])&&!r($,O)&&v($,O,h(b,O));$.prototype=y,y.constructor=$,s(n,g,$)}},b345:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-dx-shoporder"},[a("van-nav-bar",{staticClass:"fbpl",attrs:{title:"确认订单","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"weapp-nav",size:"18"}})]},proxy:!0}])}),a("div",{staticStyle:{height:"1.12rem"}}),a("div",{staticClass:"shopcat-address"},[a("van-cell",{staticClass:"sad",attrs:{icon:t.addressli.icon,"is-link":""},on:{click:t.shopcatadscl},scopedSlots:t._u([{key:"title",fn:function(){return[t.addressli.province_id?a("div",[a("p",[t._v(t._s(t.addressli.name)+" "+t._s(t.addressli.mobile))]),a("p",[t._v(" "+t._s(t.addressli.province)+" "+t._s(t.addressli.market)+" "+t._s(t.addressli.area)+" ")]),a("p",[t._v(t._s(t.addressli.address))])]):a("div",[t._v("手动添加收货地址")])]},proxy:!0}])})],1),a("ul",{staticClass:"shopcat-box"},t._l(t.list.shopping,(function(e,o){return a("li",{key:o},[a("div",{staticClass:"img",style:{backgroundImage:"url("+e.cover_img+")"}}),a("div",{staticClass:"con"},[a("div",{staticClass:"tit"},[t._v(t._s(e.title))]),a("div",{staticClass:"cfig"},[t._v(t._s(t.specv(e.spec)))])]),a("div",{staticClass:"num"},[t._v(" x"+t._s(e.num)+" "),a("div",[t._v(" 邮费："+t._s(0==parseFloat(e.freight)?"包邮":e.freight+"元")+" ")]),a("div",[t._v("单价："+t._s(e.spec.price)+"元")])])])})),0),a("div",{staticStyle:{"margin-top":"12px"}}),a("div",{staticClass:"postage"},[a("span",[t._v("邮费")]),a("span",[t._v(t._s(0==parseFloat(t.youfei)?"包邮":t.youfei+"元"))])]),t.showHidden?a("div",[a("van-popup",{staticClass:"yhj0101-plu",attrs:{round:"","get-container":"body",position:"bottom"},model:{value:t.showList,callback:function(e){t.showList=e},expression:"showList"}},[a("van-coupon-list",{attrs:{"show-count":!1,"show-exchange-bar":!1,coupons:t.list.coupon,"chosen-coupon":t.chosenCoupon},on:{change:t.onChangeyhj}})],1),a("div",{staticClass:"zffs01"},[a("van-radio-group",{model:{value:t.radiopay,callback:function(e){t.radiopay=e},expression:"radiopay"}},[a("van-cell-group",t._l(t.actionsPay,(function(e,o){return a("van-cell",{key:o,class:"p-"+e.icon,attrs:{title:e.name,clickable:"",icon:e.icon},on:{click:function(a){t.radiopay=e.id}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{name:e.id}})]},proxy:!0}],null,!0)})})),1)],1)],1)],1):t._e(),a("van-submit-bar",{attrs:{price:t.price,"button-text":"提交订单",disabled:!t.radiopay||!t.address_id},on:{submit:t.onSubPay}}),a("tx-add-panel",{attrs:{panelShow:t.panelShow,addpop:t.addressli,is_edit:t.is_edit},on:{"update:panelShow":function(e){t.panelShow=e},"update:panel-show":function(e){t.panelShow=e},address_pop_fn:t.address_pop_fn}}),a("more-btn",{attrs:{showpop:t.showpop},on:{"update:showpop":function(e){t.showpop=e}}})],1)},n=[],i=(a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("5319"),a("ddb0"),a("3835")),s=a("5530"),r=a("076e"),c=a("bcad"),d=a("0cbb"),p=a("4328"),u=a.n(p),l=a("a813"),f=a("be3b"),h=a("8add"),v={data:function(){return{youfei:0,showpop:!1,shopping_id:this.$route.params.shopping_id,type:this.$route.params.type,num:this.$route.params.shopping_id,commodity_id:this.$route.params.ref_page,specification:this.$route.params.address_id,showHidden:!0,address_id:this.$route.params.address_id||0,yhj01:"有可用优惠卷",chosenCoupon:-1,chosenCouponVal:0,chosenCouponValId:0,showList:!1,coupons:[],actionsPay:[{id:1,name:"支付宝",icon:"alipay"},{id:2,name:"余额支付",icon:"gold-coin"},{id:3,name:"微信",icon:"wechat"}],paymentShow:!1,selpaytext:"请选择支付方式",selpayid:2,radiopay:1,price:0,total:0,list:{},addressli:{icon:"add-square",icon1:"location",id:"",mobile:"",province:"",province_id:0,market:"",market_id:0,area:"",area_id:0,address:""},panelShow:!1,addpop:{},is_edit:!0}},props:{active:{type:Number,default:0}},components:{Footer:r["a"],txAddPanel:c["a"],moreBtn:d["a"]},destroyed:function(){window.sessionStorage.removeItem("ztm")},created:function(){var t=this;console.log("4-2修改确定"),f["a"].post("".concat(l["b"],"/address")).then((function(e){var a=e.data;1===a.status?h["b"].setAddressListAction(a.info):t.$toast("".concat(a.message)),t.postConfirmOrderPage()}))},mounted:function(){},watch:{panelShow:{handler:function(){this.panelShow||this.postConfirmOrderPage()},deep:!0}},methods:{postConfirmOrderPage:function(){var t=this,e=Object.create(null);e=6==this.type?{commodity_id:this.commodity_id,num:this.num,spec:this.specification}:this.commodity_id?{commodity_id:this.commodity_id}:/^[0-9]+.?[0-9]*$/.test(this.addressli.id)?{shopping_id:this.shopping_id,address_id:parseInt(this.addressli.id)}:{shopping_id:this.shopping_id},f["a"].post("".concat(l["b"],"/confirmOrderPage"),u.a.stringify(e)).then((function(e){console.log("优惠卷");var a=e.data;if(1==a.status){console.log(a),t.youfei=a.info.freight;Object(s["a"])({},a.info);if(1===a.status){var o,n=Object(s["a"])({},a.info);n.coupon.map((function(t){t.value=100*t.money,t.startAt="",t.endAt="",t.valueDesc=t.money,t.condition="满减条件",t.unitDesc="元",t.name=""})),t.price=100*n.total,t.total=100*n.total,o=t.$route.params.address_id&&6!=t.type?Object(s["a"])({},JSON.parse(sessionStorage.getItem("addrep"))):Object(s["a"])({},n.address),n.address.province_id&&(o.icon="location"),t.address_id=o.id,t.addressli=Object.assign({},t.addressli,o),t.list=n}else 2===a.status?t.$router.replace({name:"orders",params:{type:2}}):t.$toast("".concat(a.message))}else t.$toast("".concat(a.message))}))},onClickLeft:function(){"addresses"===this.$route.params.ref_page&&6!=this.type?this.$router.go(-2):this.$router.go(-1)},onClickRight:function(){this.showpop=!this.showpop},shopcatadscl:function(){this.onChangeyhj(-1),this.addressli.province_id?this.$router.push({path:"/addresses",query:{ref_page:"shoporder",address_id:this.addressli.id,shopping_id:this.shopping_id}}):(this.panelShow=!this.panelShow,this.is_edit=!1)},address_pop_fn:function(t,e){var a=this;a.addressli.icon="location",a.addressli=Object.assign({},a.addressli,t)},onSelPay:function(t,e){this.paymentShow=!this.paymentShow,this.selpayid=t.id,this.selpaytext=t.name},onChangeyhj:function(t){if(this.showList=!1,this.chosenCoupon=t,t>-1){this.chosenCouponVal=this.list.coupon[t].money,this.chosenCouponValId=this.list.coupon[t].id;var e=0;e=100*(this.total/100-this.chosenCouponVal),this.price=e<=0?0:e}else this.price=this.total,this.chosenCouponValId=0},specv:function(t){var e=l["c"],a=[];return Object.keys(t).map((function(o,n){e.includes(o)||a.push(t[o])})),a.join()},firstAPI:function(){var t=this,e=this;Promise.all([f["a"].post("".concat(l["b"],"/confirmOrderPage"),u.a.stringify({shopping_id:e.shopping_id})),f["a"].post("".concat(l["b"],"/address"))]).then((function(a){var o=Object(i["a"])(a,2),n=o[0],r=o[1],c=n.data,d=r.data;Object(s["a"])({},c.info);if(t.youfei=c.info.freight,1===c.status){var p,u=Object(s["a"])({},c.info);u.coupon.map((function(t){t.value=100*t.money,t.startAt="",t.endAt="",t.valueDesc=t.money,t.condition="满减条件",t.unitDesc="元",t.name=""})),e.price=100*u.total,e.total=100*u.total,p=e.$route.params.address_id?Object(s["a"])({},JSON.parse(sessionStorage.getItem("addrep"))):Object(s["a"])({},u.address),u.address.province_id&&(p.icon="location"),e.address_id=p.id,e.addressli=Object.assign({},e.addressli,p),e.list=u}else 2===c.status?e.$router.replace({name:"orders",params:{type:2}}):e.$toast("".concat(c.message));1===d.status?h["b"].setAddressListAction(d.info):console.log(d.message)}))},onSubPay:function(){var t=this,e=t.$toast.loading({duration:0,forbidClick:!0}),a={};6==this.type?(console.log("type等于6的",t.radiopay),a={commodity_id:t.commodity_id,address_id:t.address_id,num:t.num,spec:t.specification,pay_type:t.radiopay},f["a"].get("".concat(l["b"],"/getPayInfo")).then((function(o){if(console.log(o.data.status,"res"),1!=o.data.status)return console.log("是否等于1"),void t.$toast("".concat(o.data.message));console.log("等于1"),f["a"].post("".concat(l["b"],"/addOrder"),u.a.stringify(a)).then((function(a){var o=a.data,n=o.status,i=o.message,s=o.info;1===n?1===s.has_pay?window.location.href=s.direct_url:0===s.has_pay&&(t.$toast("".concat(i)),t.$router.replace({name:"orders",params:{type:3}})):(e.clear(),t.$toast("".concat(i)))}))}))):(console.log("type就不等于6"),a={shopping_id:t.shopping_id,address_id:t.address_id,coupon_id:t.chosenCouponValId,pay_type:t.radiopay},f["a"].post("".concat(l["b"],"/addOrder"),u.a.stringify(a)).then((function(a){var o=a.data,n=o.status,i=o.message,s=o.info;1===n?1===s.has_pay?window.location.href=s.direct_url:0===s.has_pay&&(t.$toast("".concat(i)),t.$router.replace({name:"orders",params:{type:3}})):(e.clear(),t.$toast("".concat(i)))})))},onmakePay:function(){var t=this;f["a"].post("".concat(l["b"],"/team/pay"),u.a.stringify({shopping_id:t.shopping_id,address_id:t.address_id,coupon_id:t.chosenCouponValId,pay_type:3===t.radiopay?2:1})).then((function(e){var a=e.data,o=a.status,n=a.message,i=a.info;1===o?1===i.has_pay?window.location.href=i.direct_url:0===i.has_pay&&(t.$toast("".concat(n)),t.$router.replace({name:"orders",params:{type:3}})):t.$toast("".concat(n))}))}}},m=v,g=(a("d71b"),a("2877")),b=Object(g["a"])(m,o,n,!1,null,null,null);e["default"]=b.exports},b64b:function(t,e,a){var o=a("23e7"),n=a("7b0b"),i=a("df75"),s=a("d039"),r=s((function(){i(1)}));o({target:"Object",stat:!0,forced:r},{keys:function(t){return i(n(t))}})},d71b:function(t,e,a){"use strict";var o=a("5533"),n=a.n(o);n.a},d81d:function(t,e,a){"use strict";var o=a("23e7"),n=a("b727").map,i=a("1dde"),s=a("ae40"),r=i("map"),c=s("map");o({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,a){var o=a("23e7"),n=a("83ab"),i=a("56ef"),s=a("fc6a"),r=a("06cf"),c=a("8418");o({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,o=s(t),n=r.f,d=i(o),p={},u=0;while(d.length>u)a=n(o,e=d[u++]),void 0!==a&&c(p,e,a);return p}})},df2e:function(t,e,a){},e439:function(t,e,a){var o=a("23e7"),n=a("d039"),i=a("fc6a"),s=a("06cf").f,r=a("83ab"),c=n((function(){s(1)})),d=!r||c;o({target:"Object",stat:!0,forced:d,sham:!r},{getOwnPropertyDescriptor:function(t,e){return s(i(t),e)}})},f187:function(t,e,a){"use strict";var o=a("df2e"),n=a.n(o);n.a}}]);