(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d3711f8"],{1148:function(t,e,s){"use strict";var n=s("a691"),a=s("1d80");t.exports="".repeat||function(t){var e=String(a(this)),s="",i=n(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(s+=e);return s}},2358:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("van-nav-bar",{staticClass:"fbpl",attrs:{title:"互助转吧","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"right",fn:function(){return[s("van-icon",{attrs:{name:"weapp-nav",size:"18"}})]},proxy:!0}])}),t.explain?s("div",{staticClass:"shouquan"},[s("div",{staticClass:"shouquan-content"},[s("p",[t._v("说明")]),s("p",{staticClass:"shouquan-content-content"},[s("span",{domProps:{innerHTML:t._s(t.first.declare)}})]),s("van-checkbox",{staticClass:"checkbox",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("同意")]),s("div",{staticClass:"btn",on:{click:t.showbtncl}},[t._v("确认")])],1)]):t._e(),s("div",{staticClass:"classify"},t._l(t.zb,(function(e,n){return s("input",{key:e,class:{xz:t.num==n},attrs:{type:"button",value:e},on:{click:function(e){return t.selects(n)}}})})),0),s("van-dropdown-menu",{staticClass:"pullDown"},[s("van-dropdown-item",{attrs:{options:t.option1},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),s("div",{staticClass:"balance"},[s("div",[s("p",[t._v(" 电商余额："),s("span",[t._v(t._s(t.first.balance))])]),s("p",[t._v(" 积分余额："),s("span",[t._v(t._s(t.first.available_amount))])])]),s("input",{attrs:{type:"button",value:"中奖记录"},on:{click:t.winnerRecord}})]),"100.00"!==parseFloat(this.newestData.draw_possess).toFixed(2)?s("div",{staticClass:"ownership"},[t.type?s("div",{staticClass:"multiple"},[s("p",[t._v("使用：")]),s("div",{on:{click:function(e){return t.change(0)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.options,expression:"options"}],attrs:{type:"radio",value:"integral",id:"integral"},domProps:{checked:t._q(t.options,"integral")},on:{change:function(e){t.options="integral"}}}),s("span",[t._v("互帮积分")]),s("span",{staticClass:"hint"},[t._v(t._s(t.newestData.available_amount)+"/次")])]),s("div",{on:{click:function(e){return t.change(1)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.options,expression:"options"}],attrs:{type:"radio",value:"roll",id:"roll"},domProps:{checked:t._q(t.options,"roll")},on:{change:function(e){t.options="roll"}}}),s("span",[t._v("卷余额")]),s("span",{staticClass:"hint"},[t._v(t._s(t.newestData.balance)+"/次")])])]):t._e(),t.type?s("p",[t._v(" 【"+t._s(t.newestData.title)+"】拥有权："),s("span",[t._v(t._s(t.newestData.draw_possess))])]):t._e(),s("div",{staticClass:"sudokubox"},[s("div",{staticClass:"grid",on:{click:t.ownershipLottery}},[s("div",{staticClass:"qian equal",class:{qians:1==t.choice}},[t._m(0),s("div",{staticClass:"textbox"},[t._v("翻")])]),s("div",{staticClass:"hou equal",class:{hous:1==t.choice}},[s("div",{staticClass:"againstbox"},[s("span",[t._v(t._s(t.prizeTitle))])])])])])]):s("div",{staticClass:"commodityBox"},[s("div",{staticClass:"message"},[1==t.latestInputRecord.open?s("p",[t._v("转盘未开启，敬请期待！")]):2==t.latestInputRecord.open?s("div",[parseInt(t.latestInputRecord.draw_money)<parseInt(t.newestData.money)?s("div",[s("p",[t._v(" 您拥有该转盘拥有权："),s("span",[t._v(t._s(t.latestInputRecord.possess[0].prop))])]),s("p",[t._v(" 最新投入资金："),s("span",[t._v(t._s(t.latestInputRecord.draw_money))]),t._v("/"),s("span",[t._v(t._s(t.newestData.money))])]),s("p",[t._v(" 您的抽奖次数："),s("span",[t._v(t._s(t.latestInputRecord.num))])])]):t.djsgb?s("div",[t._v(" 开盘倒计时："+t._s(t.time.hours)+"时"+t._s(t.time.minutes)+"分"+t._s(t.time.seconds)+"秒 ")]):s("div",[s("p",[t._v(" 您拥有该转盘拥有权："),s("span",[t._v(t._s(t.latestInputRecord.possess[0].prop))])]),s("p",[t._v(" 您的抽奖次数："),s("span",[t._v(t._s(t.latestInputRecord.num))])])])]):3==t.latestInputRecord.open?s("p",[t._v("已经结束")]):t._e()]),s("div",{staticClass:"commodityDialBox"},[s("div",{staticClass:"commodity"},t._l(t.newestData.prize,(function(e,n){return s("div",{key:e+n,staticClass:"commodityGrid",on:{click:function(e){return t.lotteryDraw(n)}}},[s("div",{staticClass:"commodityQian commodityEqual",class:{commodityQians:t.choices==n}},[t._m(1,!0),s("div",{staticClass:"textbox"},[t._v("翻")])]),s("div",{staticClass:"commodityHou commodityEqual",class:{commodityHous:t.choices==n}},[s("div",{staticClass:"againstbox"},[s("span",[t._v(t._s(t.prizeTitles))])])])])})),0)]),100==parseInt(t.newestData.draw_possess)?s("div",{staticClass:"betBox"},[parseInt(t.latestInputRecord.num)?s("input",{attrs:{type:"button",value:"我要追加"},on:{click:function(e){t.tzorzj=!t.tzorzj}}}):s("input",{attrs:{type:"button",value:"我要投注"},on:{click:function(e){t.tzorzj=!t.tzorzj}}})]):t._e()]),t.tzorzj?s("div",{staticClass:"betPopUp"},[s("div",[parseInt(t.latestInputRecord.num)?s("p",[t._v("我要投注")]):s("p",[t._v("我要追加")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.canyu,expression:"canyu"}],attrs:{type:"text",pattern:"请输入您要投入的金额"},domProps:{value:t.canyu},on:{input:function(e){e.target.composing||(t.canyu=e.target.value)}}}),t._m(2),s("p",[t._v(" 可获得抽奖次数： "),s("span",[t._v(t._s(t.acquire))]),t._v("次！ ")]),s("div",{staticClass:"roll-integral"},[s("label",[t._v(" 电商券 "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],attrs:{type:"radio",value:"1",name:"roll-integral"},domProps:{checked:t._q(t.gender,"1")},on:{change:function(e){t.gender="1"}}})]),s("label",[t._v(" 互帮积分 "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],attrs:{type:"radio",value:"2",name:"roll-integral"},domProps:{checked:t._q(t.gender,"2")},on:{change:function(e){t.gender="2"}}})])]),s("div",{staticClass:"inpBox"},[s("input",{attrs:{type:"button",value:"取消"},on:{click:function(e){t.tzorzj=!t.tzorzj}}}),s("input",{attrs:{type:"button",value:"确定"},on:{click:t.zjqd}})])])]):t._e(),t.winner.length?s("ul",{staticClass:"winner",class:{anim:1==t.animate}},[s("p",[t._v("拥有权中奖人员信息")]),t._l(t.winner,(function(e,n){return s("li",{key:e.create_time+n},[t._v(" 恭喜"),s("span",[t._v(t._s(e.username))]),t._v("于"),s("span",[t._v(t._s(e.create_time))]),t._v("抽中"),s("span",[t._v(t._s(e.money)+"的拥有权！")])])}))],2):t._e(),t.drawArr.length?s("ul",{staticClass:"winner",class:{anim:1==t.animate}},[s("p",[t._v("商品中奖人员信息")]),t._l(t.drawArr,(function(e,n){return s("li",{key:e.username+n},[t._v(" 恭喜"),s("span",[t._v(t._s(e.username))]),t._v("于"),s("span",[t._v(t._s(e.create_time)+"抽中"+t._s(e.money))])])}))],2):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.zjtc,expression:"zjtc"}],staticClass:"publish"},[s("div",{staticClass:"publish-content",on:{click:t.turnspeech}},[s("p",[t._v(" 恭喜您获得 "),s("span",{staticClass:"jp"},[t._v(t._s(t.prizeTitles))]),t._v("奖品一份 ")]),s("p",[t._v("点击请前往发表获奖感言！")])])]),t.newestData.introduce?s("div",{staticClass:"explain"},[s("p",[t._v("说明")]),s("div",{domProps:{innerHTML:t._s(t.newestData.introduce)}})]):t._e(),s("more-btn",{attrs:{showpop:t.showpop},on:{"update:showpop":function(e){t.showpop=e}}})],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imgbox"},[n("img",{attrs:{src:s("aecb"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imgbox"},[n("img",{attrs:{src:s("aecb"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("投入数量需为"),s("span"),t._v("的整数倍")])}],i=(s("b680"),s("4328")),o=s.n(i),r=s("a813"),c=s("be3b"),l=s("0cbb"),u={data:function(){return{showpop:!1,acquire:null,time:{},tzorzj:!1,canyu:null,gender:"1",options:"integral",explain:!0,checked:!1,first:[],zb:["公司转吧","个人转吧"],num:0,type:0,rollBalance:null,integralBalance:null,option1:[{text:"请选择转盘类型",value:0}],cou:0,choice:!1,prizeTitle:null,prizeTitles:null,choices:null,djsgb:!0,zjtc:!1,draw_id:null,grid:[1,2,3,4,5,6,7,8,9],animate:!1,drawArr:[],winner:[],winnerTime:null,postMessageTime:null,newestData:[],latestInputRecord:[],toas0:null,toas1:null,toas2:null,shicha:0}},components:{moreBtn:l["a"]},created:function(){var t=this;this.toas0=this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),"true"===localStorage.getItem("lucky")&&(this.explain=!1),this.exemption(),this.postMessage(),this.djs(),this.postMessageTime=setInterval((function(){t.djs(),t.postMessage()}),1e3),this.winnerTime=setInterval((function(){t.winnerMarquee(),t.drawArrMarquee()}),300)},updated:function(){this.touru()},watch:{type:{handler:function(t){this.cou=0,t?this.postMessage():this.newestData=[]},deep:!0}},methods:{exemption:function(){var t=this;c["a"].post("".concat(r["b"],"/turntable/class")).then((function(e){var s=e.data,n=s.status,a=s.message,i=s.info;if(1==n){t.first=i;for(var o=1;o<=i.class.length;o++){var r=Object.create(null);r.text=i.class[o-1].title,r.value=o,r.id=i.class[o-1].id,t.option1.push(r),t.toas0.clear()}}else t.$toast("".concat(a))}))},djs:function(){var t=this.latestInputRecord.countdown_time;1==this.newestData.countdown_type?this.shicha=this.newestData.countdown:2==this.newestData.countdown_type?this.shicha=60*this.newestData.countdown:3==this.newestData.countdown_type?this.shicha=60*this.newestData.countdown*60:3==this.newestData.countdown_type&&(this.shicha=60*this.newestData.countdown*60*24);var e=parseInt((new Date).getTime()/1e3);t+this.shicha-e>=0?(this.djsgb=!0,this.time=this.getFormatDuration(t+this.shicha-e)):this.djsgb=!1},showbtncl:function(){this.checked&&(this.explain=!1,localStorage.setItem("lucky",!0))},selects:function(t){1!==t?this.num=t:this.$toast("暂未开放")},postMessage:function(){var t=this;this.type&&c["a"].post("".concat(r["b"],"/turntable/list"),o.a.stringify({class_id:this.option1[this.type].id})).then((function(e){var s=e.data,n=s.status,a=s.message,i=s.info;if(1!=n)return t.$toast("".concat(a)),t.newestData=[],void(t.type=0);t.newestData=i,"100.00"==parseFloat(t.newestData.draw_possess).toFixed(2)&&t.postLatestInputRecord()}))},postLatestInputRecord:function(){var t=this;c["a"].post("".concat(r["b"],"/turntable/latestInputRecord"),o.a.stringify({turntable_id:this.newestData.turntable_id})).then((function(e){var s=e.data,n=s.status,a=s.message,i=s.info;if(1==n){if(t.latestInputRecord=i,JSON.stringify(t.winner)!==JSON.stringify(i.possess))for(var o=t.winner.length;o<i.length;o++)t.winner.push(i[o]);if(JSON.stringify(t.drawArr)!==JSON.stringify(i.draw))for(var r=t.drawArr.length;r<i.length;r++)t.drawArr.push(i[r])}else t.$toast("".concat(a))}))},getFormatDuration:function(t){var e=parseInt(t),s=Math.floor(e/3600)<10?"0"+Math.floor(e/3600):Math.floor(e/3600),n=Math.floor(e/60%60)<10?"0"+Math.floor(e/60%60):Math.floor(e/60%60),a=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return{hours:"".concat(s),minutes:"".concat(n),seconds:"".concat(a)}},change:function(t){this.options=t?"roll":"integral"},ownershipLottery:function(){if(this.cou++,!(this.cou>1))return this.option1[this.type].id?void this.postOwnership():(this.$toast("请选择转盘类型"),void(this.cou=0));this.$toast("请勿重复点击 \n^_^")},postOwnership:function(){var t,e=this;t="integral"===this.options?2:1,c["a"].post("".concat(r["b"],"/turntable/possess"),o.a.stringify({turntable_id:this.newestData.turntable_id,type:t})).then((function(t){var s=t.data,n=s.status,a=s.message,i=s.info;setTimeout((function(){e.choice=!1,setTimeout((function(){e.cou=0}),800)}),3e3),1==n?(i.lottery_results?e.prizeTitle="恭喜您抽中拥有权".concat(i.prop):e.prizeTitle="未中奖",e.choice=!0):e.$toast("".concat(a))}))},winnerMarquee:function(){this.animate=!0,this.winner.push(this.winner[0]),this.winner.shift(),this.animate=!1},drawArrMarquee:function(){this.animates=!0,this.drawArr.push(this.drawArr[0]),this.drawArr.shift(),this.animates=!1},zjqd:function(){var t=this,e=this.$toast.loading({duration:0,message:"加载中...",forbidClick:!0}),s=/^\+?[1-9]\d*$/;if(!s.test(this.canyu))return this.$toast("请正确输入！"),!1;c["a"].post("".concat(r["b"],"/turntable/investmentVoucher"),o.a.stringify({turntable_id:this.newestData.turntable_id,money:this.canyu,type:parseInt(this.gender)})).then((function(s){var n=s.data,a=n.status,i=n.message;n.info;1==a?(t.tzorzj=!t.tzorzj,t.exemption(),e.clear()):t.$toast("".concat(i))}))},touru:function(){"1"==this.gender?this.acquire=Math.floor(this.canyu/this.newestData.balance):this.acquire=Math.floor(this.canyu/this.newestData.available_amount)},lotteryDraw:function(t){this.toas2=this.$toast.loading({duration:0,message:"",forbidClick:!0});var e=this.latestInputRecord.countdown_time,s=parseInt((new Date).getTime()/1e3);if(0==e||e+this.shicha-s>=0)this.$toast("转盘即将开始，请稍后");else{if(this.cou++,!(this.cou>1))return this.latestInputRecord.num?void this.postZhuanPanChouJiang(t):(this.$toast("您的抽奖次数不足！"),void(this.cou=0));this.$toast("请勿重复点击 \n^_^")}},postZhuanPanChouJiang:function(t){var e=this;c["a"].post("".concat(r["b"],"/turntable/lotteryDraw"),o.a.stringify({turntable_id:this.newestData.turntable_id})).then((function(s){var n=s.data,a=n.status,i=n.message,o=n.info;if(e.toas2.clear(),1!=a)return e.$toast("".concat(i)),void(e.cou=0);setTimeout((function(){e.choices=null,setTimeout((function(){e.cou=0}),800)}),3e3),e.choices=t,e.draw_id=o.draw_id,o.lottery_results?(e.prizeTitles=o.prize_title,setTimeout((function(){e.zjtc=!0}),1e3)):(e.prizeTitles="未中奖",e.zjtc=!1)}))},turnspeech:function(){this.zjtc=!this.zjtc,this.$router.push({name:"turnspeech",params:{draw_id:this.draw_id}})},winnerRecord:function(){this.$router.push({name:"recocrd"})},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){this.showpop=!this.showpop}},beforeDestroy:function(){clearInterval(this.postMessageTime),clearInterval(this.winnerTime)}},p=u,d=(s("bfb4"),s("2877")),h=Object(d["a"])(p,n,a,!1,null,null,null);e["default"]=h.exports},"408a":function(t,e,s){var n=s("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"71d3":function(t,e,s){},b680:function(t,e,s){"use strict";var n=s("23e7"),a=s("a691"),i=s("408a"),o=s("1148"),r=s("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,s){return 0===e?s:e%2===1?u(t,e-1,s*t):u(t*t,e/2,s)},p=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},d=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));n({target:"Number",proto:!0,forced:d},{toFixed:function(t){var e,s,n,r,c=i(this),d=a(t),h=[0,0,0,0,0,0],v="",f="0",m=function(t,e){var s=-1,n=e;while(++s<6)n+=t*h[s],h[s]=n%1e7,n=l(n/1e7)},_=function(t){var e=6,s=0;while(--e>=0)s+=h[e],h[e]=l(s/t),s=s%t*1e7},w=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var s=String(h[t]);e=""===e?s:e+o.call("0",7-s.length)+s}return e};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(e=p(c*u(2,69,1))-69,s=e<0?c*u(2,-e,1):c/u(2,e,1),s*=4503599627370496,e=52-e,e>0){m(0,s),n=d;while(n>=7)m(1e7,0),n-=7;m(u(10,n,1),0),n=e-1;while(n>=23)_(1<<23),n-=23;_(1<<n),m(1,1),_(2),f=w()}else m(0,s),m(1<<-e,0),f=w()+o.call("0",d);return d>0?(r=f.length,f=v+(r<=d?"0."+o.call("0",d-r)+f:f.slice(0,r-d)+"."+f.slice(r-d))):f=v+f,f}})},bfb4:function(t,e,s){"use strict";var n=s("71d3"),a=s.n(n);a.a}}]);