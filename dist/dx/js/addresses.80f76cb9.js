(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addresses"],{2909:function(t,a,s){"use strict";s.d(a,"a",(function(){return o}));var i=s("6b75");function e(t){if(Array.isArray(t))return Object(i["a"])(t)}s("a4d3"),s("e01a"),s("d28b"),s("a630"),s("d3b7"),s("3ca3"),s("ddb0");function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var d=s("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return e(t)||n(t)||Object(d["a"])(t)||r()}},"4de4":function(t,a,s){"use strict";var i=s("23e7"),e=s("b727").filter,n=s("1dde"),d=s("ae40"),r=n("filter"),o=d("filter");i({target:"Array",proto:!0,forced:!r||!o},{filter:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,a,s){"use strict";var i=s("d784"),e=s("825a"),n=s("7b0b"),d=s("50c4"),r=s("a691"),o=s("1d80"),c=s("8aa5"),l=s("14c3"),f=Math.max,u=Math.min,_=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,a,s,i){var g=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=i.REPLACE_KEEPS_$0,m=g?"$":"$0";return[function(s,i){var e=o(this),n=void 0==s?void 0:s[t];return void 0!==n?n.call(s,e,i):a.call(String(e),s,i)},function(t,i){if(!g&&b||"string"===typeof i&&-1===i.indexOf(m)){var n=s(a,t,this,i);if(n.done)return n.value}var o=e(t),_=String(this),h="function"===typeof i;h||(i=String(i));var p=o.global;if(p){var w=o.unicode;o.lastIndex=0}var S=[];while(1){var $=l(o,_);if(null===$)break;if(S.push($),!p)break;var C=String($[0]);""===C&&(o.lastIndex=c(_,d(o.lastIndex),w))}for(var k="",A=0,E=0;E<S.length;E++){$=S[E];for(var x=String($[0]),O=f(u(r($.index),_.length),0),I=[],j=1;j<$.length;j++)I.push(v($[j]));var L=$.groups;if(h){var q=[x].concat(I,O,_);void 0!==L&&q.push(L);var P=String(i.apply(void 0,q))}else P=y(x,_,O,I,L,i);O>=A&&(k+=_.slice(A,O)+P,A=O+x.length)}return k+_.slice(A)}];function y(t,s,i,e,d,r){var o=i+t.length,c=e.length,l=p;return void 0!==d&&(d=n(d),l=h),a.call(r,l,(function(a,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return s.slice(0,i);case"'":return s.slice(o);case"<":r=d[n.slice(1,-1)];break;default:var l=+n;if(0===l)return a;if(l>c){var f=_(l/10);return 0===f?a:f<=c?void 0===e[f-1]?n.charAt(1):e[f-1]+n.charAt(1):a}r=e[l-1]}return void 0===r?"":r}))}}))},"807c":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"addresses-wrapper overall_background_color"},[s("van-nav-bar",{staticClass:"fbpl overall_navigation_color",attrs:{title:"收货地址","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),s("div",{staticStyle:{height:"0.92rem"}}),2===t.listShow?s("ul",{staticClass:"address-list"},[t._l(t.list,(function(a,i){return s("li",{key:i,ref:"index"+i,refInFor:!0,staticClass:"light_colour",class:[t.radio===a.id?"on":""]},[s("div",{staticClass:"li-hed"},[t._v(" "+t._s(a.username)+" "+t._s(a.mobile)+" ")]),s("div",{staticClass:"li-con"},[t._v(" "+t._s(a.province)+" "+t._s(a.market)+" "+t._s(a.area)+" "+t._s(a.address)+" ")]),"duihuan"===t.ref_page?s("div",{staticClass:"li-push"},[+t.address_idsy===+a.id?s("van-icon",{attrs:{name:"success"}}):s("div",{on:{click:function(s){return t.address_idsycl(a)}}},[t._v("使用")])],1):t._e(),"shoporder"===t.ref_page?s("div",{staticClass:"li-push"},[+t.address_idsy===+a.id?s("van-icon",{attrs:{name:"success"}}):s("div",{on:{click:function(s){return t.address_idsycl(a)}}},[t._v("使用")])],1):t._e(),s("div",{staticClass:"li-fot"},[s("div",{staticClass:"fot-left"},[s("div",{class:[+a.is_default?"a":"b","fot-left-radio"],on:{click:function(s){return t.add_def_fn(a,i)}}},[+a.is_default?s("van-icon",{staticClass:"aa",attrs:{name:"checked"}}):s("van-icon",{staticClass:"bb",attrs:{name:"circle"}}),+a.is_default?[s("span",{staticClass:"on"},[t._v("已设为默认")])]:[s("span",[t._v("设为默认")])]],2)]),s("div",{staticClass:"fot-right"},[s("span",{on:{click:function(s){return t.add_del_fn(a.id,i)}}},[t._v("删除")]),s("span",{on:{click:function(s){return t.address_edit_fn(a,i)}}},[t._v("修改")])])])])})),s("li",{staticClass:"li-empty"})],2):t._e(),3===t.listShow?s("div",{staticClass:"address-empty"},[s("van-icon",{attrs:{name:"location-o"}}),s("p",[t._v("暂无收货地址")])],1):t._e(),3===t.listShow||2===t.listShow?s("div",{staticClass:"address-add",on:{click:t.address_add_fn}},[s("van-icon",{attrs:{name:"add-square"}}),t._v("添加收货地址 ")],1):t._e(),s("tx-add-panel",{attrs:{panelShow:t.panelShow,addpop:t.addpop,is_edit:t.is_edit},on:{"update:panelShow":function(a){t.panelShow=a},"update:panel-show":function(a){t.panelShow=a},address_pop_fn:t.address_pop_fn}})],1)},e=[],n=(s("99af"),s("4de4"),s("d81d"),s("ac1f"),s("5319"),s("2909")),d=s("4328"),r=s.n(d),o=s("be3b"),c=s("85b1"),l=s("a813"),f=s("8add"),u=s("bcad"),_={data:function(){return{list:[],listShow:1,radio:0,address_idsy:this.$route.query.address_id||0,shopping_id:this.$route.query.shopping_id||0,btnEnaled:!0,btnshow:!1,panelShow:!1,is_edit:!0,isShow:!1,ref_page:this.$route.query.ref_page,addpop:{}}},components:{txAddPanel:u["a"]},watch:{is_edit:{handler:function(){this.address_list_fn()},deep:!0},panelShow:{handler:function(){this.address_list_fn()},deep:!0}},created:function(){var t=this;t.add_del_fn=Object(c["a"])(t.add_del_fn,500,{leading:!0,trailing:!1}),t.add_def_fn=Object(c["a"])(t.add_def_fn,500,{leading:!0,trailing:!1})},mounted:function(){this.address_list_fn()},methods:{onClickLeft:function(){this.$router.go(-1)},address_idsycl:function(t){"duihuan"==this.$route.query.ref_page?(this.address_idsy=t.id,this.$router.replace({name:"duihuan",params:{ref_page:"addresses",draw_id:this.$route.query.draw_id,address_id:this.address_idsy}})):(this.address_idsy=t.id,sessionStorage.setItem("addrep",JSON.stringify(t)),this.$router.replace({name:"shopOrder",params:{ref_page:"addresses",address_id:this.address_idsy,shopping_id:this.shopping_id}}))},panelShow_fn:function(){this.panelShow=!this.panelShow},address_pop_fn:function(t,a){this.is_edit?this.$set(this.list,a,t):this.list.unshift(t),f["b"].setAddressListAction(this.list)},address_edit_fn:function(t,a){this.is_edit=!0,this.panelShow_fn(),this.addpop=t,this.addpop.index=a},address_add_fn:function(){if(this.list.length>10)return this.$toast({message:"地址最多10条",forbidClick:!0});this.panelShow_fn(),this.is_edit=!1,this.addpop={}},emptyaddpop:function(){var t=this;t.addpop={}},address_list_fn:function(){var t=this,a=t.$toast.loading({duration:0,message:"加载中...",forbidClick:!0});o["a"].post("".concat(l["b"],"/address")).then((function(s){var i=s.data,e=i.status,d=i.message,r=i.info,o=3;if(a.clear(),1===e){var c;Array.isArray(r)&&r.length>0&&(o=2);var l=r;l.map((function(a){1===+a.is_default&&(t.radio=a.address_id)})),t.list=(c=[]).concat.apply(c,Object(n["a"])(r)),f["b"].setAddressListAction(t.list)}else t.$toast({message:d,forbidClick:!0});t.listShow=o}))},add_def_fn:function(t,a){var s=this;if(!+t.is_default){var i=s.$toast.loading({duration:0,message:"设置中...",forbidClick:!0});o["a"].post("".concat(l["b"],"/address/modifyDefault"),r.a.stringify({address_id:t.id})).then((function(a){var e=a.data,n=e.status,d=e.message;e.info;1===n?s.list.map((function(a){a.id===t.id?a.is_default=1:a.is_default=0})):s.$toast({message:d,forbidClick:!0}),i.clear()}))}},add_del_fn:function(t,a){var s=this,i=[];s.$dialog.alert({message:"确定要删除该地址吗？"}).then((function(){var e=s.$toast.loading({duration:0,message:"处理中...",forbidClick:!0});o["a"].post("".concat(l["b"],"/address/delete"),r.a.stringify({id:t})).then((function(n){var d=n.data,r=d.status,o=d.message;d.info;1===r?(i=s.list.filter((function(a){return a.id!==t})),s.radio=t,s.$refs["index"+a][0].addEventListener("animationend",(function(){s.list=i,f["b"].setAddressListAction(s.list),s.$toast("地址删除成功")}))):s.$toast("".concat(o)),e.clear()}))}))}}},h=_,p=(s("a8bc"),s("2877")),v=Object(p["a"])(h,i,e,!1,null,null,null);a["default"]=v.exports},9439:function(t,a,s){},a8bc:function(t,a,s){"use strict";var i=s("9439"),e=s.n(i);e.a},d81d:function(t,a,s){"use strict";var i=s("23e7"),e=s("b727").map,n=s("1dde"),d=s("ae40"),r=n("map"),o=d("map");i({target:"Array",proto:!0,forced:!r||!o},{map:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);